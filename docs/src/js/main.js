const a0_0x24d0a0=a0_0x154f;(function(_0x3b94c2,_0x430dc1){const _0x47d6fd=a0_0x154f,_0x403f24=_0x3b94c2();while(!![]){try{const _0x10a8f9=parseInt(_0x47d6fd(0x26a))/0x1*(-parseInt(_0x47d6fd(0x233))/0x2)+-parseInt(_0x47d6fd(0x258))/0x3*(parseInt(_0x47d6fd(0x242))/0x4)+parseInt(_0x47d6fd(0x224))/0x5*(parseInt(_0x47d6fd(0x214))/0x6)+-parseInt(_0x47d6fd(0x256))/0x7+-parseInt(_0x47d6fd(0x1f9))/0x8+parseInt(_0x47d6fd(0x250))/0x9+parseInt(_0x47d6fd(0x1fa))/0xa;if(_0x10a8f9===_0x430dc1)break;else _0x403f24['push'](_0x403f24['shift']());}catch(_0x4255cf){_0x403f24['push'](_0x403f24['shift']());}}}(a0_0x4a15,0x31d3c));import a0_0x34866e from'../core/1.1.0/mgba.js';import a0_0x19e5b7 from'../core/2.0.0/mgba.js';import*as a0_0x59661a from'./gamepad.js';function a0_0x4a15(){const _0x40e07c=['tEXtComment\x00','log','indexOf','Wasm_©','turboF','visibilitychange','fill','noti-mess','substring','fileSize','158eqiepN','listFiles','saveState','rgba(245,\x20232,\x20209,\x200.4)','contains','remove','disable','led06','control-setting','createObjectURL','reload','listCheats','.png','appendChild','click','1808iEYMnp','Auto\x20save\x20','loadState','Do\x20you\x20want\x20to\x20load\x20save\x20state?','beforeunload','charCodeAt','padStart','textContent','Error\x20ledSave:','FSSync','canvas','pauseGame','Cloud\x20upload\x20','led03','98037yXXgvd','exec','style','persisted','led01','\x20time(s)','1811768ugZiry','download','699AbqcQy','bottom','saveTime','replace','visibilityState','.gb','timer','gbc1','screenshot','listRoms','match','#20A5A6','image/png','files','getItem','screenSize','visible','led0','4452mifwmC','setVolume','\x20:\x20','classList','filter','slotStateSaved','1.1.0','listStates','uploadAll','uId','hidden','GBAver','3228048IsICfT','10588720dOiBpK','endsWith','listSaves','body','setFastForwardMultiplier','#E0C068','encode','trim','join','toString','0,0,','All','editFileName','includes','led00','/data/games/','href','split','entries','resumeGame','then','uploadRom','opacity','toggleRewind','downloadFile','type','1522086hrEdqQ','/data/states/','lastIndexOf','loadGame','addEventListener','setItem','getElementById','Paused!','innerWidth','led02','0.4','listScreenshots','length','deleteFile','gbc','error','5tmWRXS','createElement','states','add','onLine'];a0_0x4a15=function(){return _0x40e07c;};return a0_0x4a15();}import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const versions={'1.1.0':a0_0x34866e,'2.0.0':a0_0x19e5b7};let currentVersion=localStorage[a0_0x24d0a0(0x266)](a0_0x24d0a0(0x1f8))||a0_0x24d0a0(0x1f3),mGBA=versions[currentVersion];document[a0_0x24d0a0(0x21a)](a0_0x24d0a0(0x1f8))[a0_0x24d0a0(0x249)]=a0_0x24d0a0(0x22c)+currentVersion,document['getElementById'](a0_0x24d0a0(0x1f8))['addEventListener'](a0_0x24d0a0(0x241),()=>{const _0x1b58aa=a0_0x24d0a0,_0x7773e9=Object['keys'](versions);let _0x19bec0=_0x7773e9[_0x1b58aa(0x22b)](currentVersion);currentVersion=_0x7773e9[(_0x19bec0+0x1)%_0x7773e9[_0x1b58aa(0x220)]],localStorage[_0x1b58aa(0x219)](_0x1b58aa(0x1f8),currentVersion),document[_0x1b58aa(0x21a)](_0x1b58aa(0x1f8))[_0x1b58aa(0x249)]=_0x1b58aa(0x22c)+currentVersion,setTimeout(()=>{const _0xa88272=_0x1b58aa;window['location'][_0xa88272(0x23d)]();},0x3e8);});const Module={'canvas':document[a0_0x24d0a0(0x21a)](a0_0x24d0a0(0x24c))};function initializeCore(_0x3d567d,_0x22ee9d){const _0x49125c=a0_0x24d0a0;_0x3d567d(_0x22ee9d)[_0x49125c(0x20e)](function(_0x2c5d3e){_0x2c5d3e['FSInit']();});}initializeCore(mGBA,Module);let countAutoSave=0x0,countUpload=0x0;const canvas=document['getElementById'](a0_0x24d0a0(0x24c)),controlSetting=document[a0_0x24d0a0(0x21a)](a0_0x24d0a0(0x23b));function handleVisibilityChange(_0x5770d6){const _0x128e46=a0_0x24d0a0;document[_0x128e46(0x25c)]===_0x128e46(0x1f7)||_0x5770d6?.[_0x128e46(0x213)]===_0x128e46(0x246)||_0x5770d6?.[_0x128e46(0x253)]?(Module[_0x128e46(0x24b)](),pauseGame(),canvas[_0x128e46(0x26d)][_0x128e46(0x227)](_0x128e46(0x268))):(setTimeout(()=>{const _0x217588=_0x128e46;canvas[_0x217588(0x26d)][_0x217588(0x238)]('visible');},0x258),controlSetting['classList'][_0x128e46(0x237)](_0x128e46(0x268))&&resumeGame());}async function statusShow(){const _0x3c1528=a0_0x24d0a0;document[_0x3c1528(0x218)]('pagehide',handleVisibilityChange),document[_0x3c1528(0x218)](_0x3c1528(0x22e),handleVisibilityChange),window['addEventListener'](_0x3c1528(0x246),handleVisibilityChange),restoreArea(),startTimer(),await a0_0x59661a[_0x3c1528(0x22d)](parseInt(await getData(gameName,'0','turboState'))),await delay(0xc8),await Module['SDL2'](),await delay(0x320),await led(parseInt(await getData(gameName,'0',_0x3c1528(0x1f2)))),await notiMessage('W_©'+currentVersion,0x3e8),await wrapContent();}async function saveStatePeriodically(){const _0x39177c=a0_0x24d0a0;await ledSave(_0x39177c(0x263)),await Module[_0x39177c(0x235)](0x0),await Module[_0x39177c(0x24b)](),await screenShot(0x0),console[_0x39177c(0x22a)](_0x39177c(0x243)+ ++countAutoSave+_0x39177c(0x255));}async function saveStateInCloud(){const _0x4459a2=a0_0x24d0a0,_0x330e28=gameName[_0x4459a2(0x25b)](/\.(zip|gb|gbc|gba)$/,'.ss0'),_0x3882ce=localStorage['getItem'](_0x4459a2(0x1f6));navigator[_0x4459a2(0x228)]&&(_0x3882ce&&(await ledSave(_0x4459a2(0x1ff)),await delay(0x3e8),await dpUploadFile(_0x330e28,Module[_0x4459a2(0x212)](_0x4459a2(0x215)+_0x330e28),'state'),await lockNoti('',_0x4459a2(0x24e)+ ++countUpload+'\x20time(s)',0x7d0)));}function startTimer(){let [_0xbc1c14,_0x421d30,_0x81e0e7,_0x205f8e,_0x2e6545]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0x250c76=a0_0x154f;_0x81e0e7++,_0x205f8e++,_0x2e6545++;if(_0x81e0e7===0x3c)[_0x81e0e7,_0x421d30]=[0x0,_0x421d30+0x1];if(_0x421d30===0x3c)[_0x421d30,_0xbc1c14]=[0x0,_0xbc1c14+0x1];document[_0x250c76(0x21a)](_0x250c76(0x25e))[_0x250c76(0x249)]=_0xbc1c14+'h'+_0x421d30[_0x250c76(0x203)]()[_0x250c76(0x248)](0x2,'0')+'.'+_0x81e0e7[_0x250c76(0x203)]()[_0x250c76(0x248)](0x2,'0');_0x205f8e===0x3c&&(saveStatePeriodically(),_0x205f8e=0x0);;_0x2e6545===0x708&&(saveStateInCloud(),_0x2e6545=0x0);;},0x3e8);}export async function uploadGame(_0x476e3b){const _0x195795=a0_0x24d0a0,_0x3d8dc3=_0x476e3b[_0x195795(0x265)][0x0];Module[_0x195795(0x20f)](_0x3d8dc3,()=>{Module['FSSync']();});}export async function loadGame(_0x5dc62e){const _0x3fbd25=a0_0x24d0a0,_0x135575=_0x5dc62e['replace'](/\.(gba|gbc|gb|zip)$/,'.ss0'),_0x4a0d26=Module[_0x3fbd25(0x234)](_0x3fbd25(0x226))[_0x3fbd25(0x26e)](_0x13a6e1=>_0x13a6e1!=='.'&&_0x13a6e1!=='..');intro[_0x3fbd25(0x26d)][_0x3fbd25(0x227)](_0x3fbd25(0x239)),errorLogElements[0x0][_0x3fbd25(0x252)][_0x3fbd25(0x259)]='0',ingame[_0x3fbd25(0x26d)][_0x3fbd25(0x238)]('disable'),_0x5dc62e[_0x3fbd25(0x1fb)]('.gbc')||_0x5dc62e[_0x3fbd25(0x1fb)](_0x3fbd25(0x25d))?(canvas[_0x3fbd25(0x26d)][_0x3fbd25(0x227)](_0x3fbd25(0x222)),areaTrans[_0x3fbd25(0x26d)][_0x3fbd25(0x227)](_0x3fbd25(0x25f)),localStorage[_0x3fbd25(0x219)](_0x3fbd25(0x267),_0x3fbd25(0x204)+(window[_0x3fbd25(0x21c)]-0xe6)+','+(window['innerWidth']-0xe6)*0x9/0xa)):localStorage[_0x3fbd25(0x219)]('screenSize',_0x3fbd25(0x204)+(window[_0x3fbd25(0x21c)]-0x96)+','+(window[_0x3fbd25(0x21c)]-0x96)*0x2/0x3),_0x4a0d26[_0x3fbd25(0x207)](_0x135575)?(await Module[_0x3fbd25(0x217)](_0x3fbd25(0x209)+_0x5dc62e),confirm(_0x3fbd25(0x245))&&(await delay(0x64),await Module[_0x3fbd25(0x244)](0x0),await shaderData())):(await Module['loadGame'](_0x3fbd25(0x209)+_0x5dc62e),await shaderData()),await statusShow();}export async function saveState(_0x43dbd0){const _0xa6f233=a0_0x24d0a0;await Module[_0xa6f233(0x235)](_0x43dbd0);}export async function loadState(_0x4eee58){const _0x25c616=a0_0x24d0a0;await Module[_0x25c616(0x244)](_0x4eee58);}export async function downloadFile(_0x560418,_0x2bcb35){const _0x7708a4=a0_0x24d0a0,_0x3b58a5=Module[_0x7708a4(0x212)](_0x560418),_0x52193f=document[_0x7708a4(0x225)]('a');document[_0x7708a4(0x1fd)][_0x7708a4(0x240)](_0x52193f),_0x52193f[_0x7708a4(0x257)]=_0x2bcb35;const _0x14c4fe=new Blob([_0x3b58a5],{'type':'application/octet-stream'});_0x52193f[_0x7708a4(0x20a)]=URL[_0x7708a4(0x23c)](_0x14c4fe),_0x52193f[_0x7708a4(0x241)](),URL['revokeObjectURL'](_0x14c4fe),_0x52193f['remove']();}export function downloadFileInCloud(_0x41605f){const _0x1ad689=a0_0x24d0a0;try{const _0x8a77a0=Module[_0x1ad689(0x212)](_0x41605f);return _0x8a77a0;}catch(_0x559cbd){return null;}}export async function uploadFileInCloud(_0x2bca07){Module['uploadAll'](_0x2bca07,async()=>{localStorageFile(),await Module['FSSync']();});}export async function uploadFile(_0x3a7c86){const _0x62c7ab=a0_0x24d0a0,_0x406a5f=_0x3a7c86[_0x62c7ab(0x265)][0x0];Module['uploadAll'](_0x406a5f,async()=>{const _0x14dea6=_0x62c7ab;localStorageFile(),await Module[_0x14dea6(0x24b)]();});}export async function editFile(_0x5483db,_0x25caa1,_0x24e4d0){const _0x41937d=a0_0x24d0a0;await Module[_0x41937d(0x206)](_0x5483db,_0x25caa1,_0x24e4d0);}export async function deleteFile(_0x394c3a){const _0x58cdf2=a0_0x24d0a0;try{return await Module[_0x58cdf2(0x221)](_0x394c3a),!![];}catch(_0x4a9395){return console['error'](_0x394c3a),null;}}export function listFiles(_0x2cab5f){const _0x1c2571=a0_0x24d0a0,_0x8fd0a9=Module[_0x1c2571(0x234)](_0x2cab5f)[_0x1c2571(0x26e)](_0x140d01=>_0x140d01!=='.'&&_0x140d01!=='..');return _0x8fd0a9;}export function listGame(){const _0x2f36ff=a0_0x24d0a0,_0x49a7a1=Module[_0x2f36ff(0x261)]()[_0x2f36ff(0x26e)](_0x4924e6=>_0x4924e6!=='.'&&_0x4924e6!=='..');return _0x49a7a1;}export function listSave(){const _0x88008c=a0_0x24d0a0,_0x40aad6=Module[_0x88008c(0x1fc)]()[_0x88008c(0x26e)](_0x3f16a5=>_0x3f16a5!=='.'&&_0x3f16a5!=='..');return _0x40aad6;}export function listState(){const _0x10d8f8=a0_0x24d0a0,_0x2271e4=Module[_0x10d8f8(0x1f4)]()[_0x10d8f8(0x26e)](_0x5341f0=>_0x5341f0!=='.'&&_0x5341f0!=='..');return _0x2271e4;}export function listCheat(){const _0x11dec5=a0_0x24d0a0,_0x49b603=Module[_0x11dec5(0x23e)]()[_0x11dec5(0x26e)](_0x38a72e=>_0x38a72e!=='.'&&_0x38a72e!=='..');return _0x49b603;}export function listScreenshot(){const _0x1b6c31=a0_0x24d0a0,_0x5852e5=Module[_0x1b6c31(0x21f)]()['filter'](_0x35368d=>_0x35368d!=='.'&&_0x35368d!=='..');return _0x5852e5;}export function fileSize(_0x27d125){const _0x24243f=a0_0x24d0a0,_0x3dd3e2=Module[_0x24243f(0x232)](_0x27d125);return _0x3dd3e2;}export async function resumeGame(){const _0x5934d0=a0_0x24d0a0;Module[_0x5934d0(0x20d)](),Module['SDL2'](),notiMessage('Resumed!',0x7d0);}function a0_0x154f(_0x1744ec,_0x3d8b){const _0x4a156f=a0_0x4a15();return a0_0x154f=function(_0x154f50,_0x231184){_0x154f50=_0x154f50-0x1f2;let _0x28def3=_0x4a156f[_0x154f50];return _0x28def3;},a0_0x154f(_0x1744ec,_0x3d8b);}export async function pauseGame(){const _0x162030=a0_0x24d0a0;Module[_0x162030(0x24d)](),Module['SDL2'](),notiMessage(_0x162030(0x21b),0x7d0);}export async function buttonPress(_0x5243e1){Module['buttonPress'](_0x5243e1);}export async function buttonUnpress(_0x10043e){Module['buttonUnpress'](_0x10043e);}export async function screenShot(_0x15b3a5){const _0x575739=a0_0x24d0a0,_0xf1160e=gameName[_0x575739(0x25b)](/\.(gba|gbc|gb|zip)$/,'_'+_0x15b3a5+_0x575739(0x23f)),_0x2f3b7b=await getData(gameName,_0x15b3a5,_0x575739(0x205))||'';console[_0x575739(0x22a)](_0x2f3b7b),await Module[_0x575739(0x260)](_0xf1160e),await setData(gameName,_0x15b3a5,_0x575739(0x25a),formatDateTime(Date['now']()),_0x2f3b7b);}export async function dowloadScreenShot(_0x48718b){const _0x14c07f=a0_0x24d0a0;try{const _0x5ab53e=await fileToBase64(Module[_0x14c07f(0x212)](_0x48718b));return _0x5ab53e;}catch{}}export async function captureOCR(_0x2ab327){const _0xbb9d26=a0_0x24d0a0;Module[_0xbb9d26(0x260)](_0x2ab327);const _0x928ee1=Module[_0xbb9d26(0x212)]('/data/screenshots/'+_0x2ab327);return _0x928ee1;}export async function setFastForwardMultiplier(_0x41e323){const _0x45f53d=a0_0x24d0a0;Module[_0x45f53d(0x1fe)](_0x41e323);}export async function uploadCheats(_0x6c622f){Module['autoLoadCheats'](),Module['uploadAll'](_0x6c622f,async()=>{});}export function setVolume(_0x8a862a){const _0x1f411d=a0_0x24d0a0;Module[_0x1f411d(0x26b)](_0x8a862a);}export async function setData(_0x180ac3,_0x5b7656,_0x4005d8,_0x34ec0c,_0x319804=''){const _0x25fd51=a0_0x24d0a0,_0x2668c3=_0x180ac3[_0x25fd51(0x25b)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x19f801='/data/screenshots/'+_0x2668c3+'_'+_0x5b7656+_0x25fd51(0x23f);let _0x541b17;try{_0x541b17=await fileToBase64(Module[_0x25fd51(0x212)](_0x19f801));}catch(_0xd0c108){await Module[_0x25fd51(0x260)](_0x2668c3+'_'+_0x5b7656+_0x25fd51(0x23f)),await delay(0xc8),_0x541b17=await fileToBase64(Module[_0x25fd51(0x212)](_0x19f801));}let _0x50bb6f=atob(_0x541b17[_0x25fd51(0x20b)](',')[0x1]),_0x442f0e=_0x25fd51(0x229),_0x33353d=_0x50bb6f[_0x25fd51(0x22b)](_0x442f0e),_0x273de5={};if(_0x33353d!==-0x1||_0x319804['trim']()!==''){let _0x30ec60=_0x33353d!==-0x1?_0x50bb6f[_0x25fd51(0x231)](_0x33353d+_0x442f0e[_0x25fd51(0x220)]):_0x319804,_0x240b97=/(\w+)\s*:\s*([^|]*)/g,_0x2499fd;while((_0x2499fd=_0x240b97[_0x25fd51(0x251)](_0x30ec60))!==null){_0x273de5[_0x2499fd[0x1][_0x25fd51(0x201)]()]=_0x2499fd[0x2][_0x25fd51(0x201)]();}_0x33353d!==-0x1&&(_0x50bb6f=_0x50bb6f[_0x25fd51(0x231)](0x0,_0x33353d));}_0x273de5[_0x4005d8]=_0x34ec0c;let _0x1bb7c2=Object[_0x25fd51(0x20c)](_0x273de5)['map'](([_0x25dd91,_0x184bcd])=>_0x25dd91+_0x25fd51(0x26c)+_0x184bcd)[_0x25fd51(0x202)]('\x20|\x20'),_0xdee052=new TextEncoder()[_0x25fd51(0x200)](_0x442f0e+'\x20'+_0x1bb7c2),_0x5b97e9=new Uint8Array([..._0x50bb6f]['map'](_0x24fa1b=>_0x24fa1b[_0x25fd51(0x247)](0x0))['concat']([..._0xdee052])),_0x4f3efa=new File([new Blob([_0x5b97e9],{'type':_0x25fd51(0x264)})],_0x2668c3+'_'+_0x5b7656+_0x25fd51(0x23f),{'type':'image/png'});Module[_0x25fd51(0x1f5)](_0x4f3efa,async()=>{});}export async function getData(_0x21e501,_0xdef171,_0x190221){const _0xf24380=a0_0x24d0a0;try{const _0x42d9f2=_0x21e501[_0xf24380(0x25b)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x239a99='/data/screenshots/'+_0x42d9f2+'_'+_0xdef171+_0xf24380(0x23f);let _0x1b765d;try{_0x1b765d=await fileToBase64(Module[_0xf24380(0x212)](_0x239a99));}catch(_0x3e200e){return null;}let _0x272d41=atob(_0x1b765d['split'](',')[0x1]),_0x48ca9a=_0xf24380(0x229),_0x5459b3=_0x272d41[_0xf24380(0x22b)](_0x48ca9a);if(_0x5459b3!==-0x1){let _0x4c58f4=_0x272d41[_0xf24380(0x231)](_0x5459b3+_0x48ca9a[_0xf24380(0x220)]);if(_0x190221===_0xf24380(0x205))return _0x4c58f4[_0xf24380(0x201)]();let _0x20ea45=new RegExp(_0x190221+'\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)'),_0x40f8bc=_0x4c58f4[_0xf24380(0x262)](_0x20ea45);if(_0x40f8bc)return _0x40f8bc[0x1][_0xf24380(0x201)]();}}catch(_0x658533){return console[_0xf24380(0x223)]({'romName':_0x21e501,'slot':_0xdef171,'type':_0x190221}),null;}}export async function ledSave(_0x4c7b32){const _0x225170=a0_0x24d0a0,_0x3b9fd9=parseInt(await getData(gameName,'0',_0x225170(0x1f2))),_0x3ac76e=_0x3b9fd9===0x1?_0x225170(0x254):_0x3b9fd9===0x2?_0x225170(0x21d):_0x3b9fd9===0x3?_0x225170(0x24f):_0x3b9fd9===0x4?'led04':_0x3b9fd9===0x5?'led05':_0x3b9fd9===0x6?_0x225170(0x23a):_0x3b9fd9===0x7?'led07':_0x225170(0x208);try{for(let _0xf8b2e1=0x0;_0xf8b2e1<=0x7;_0xf8b2e1++){document['getElementById']('led0'+_0xf8b2e1)[_0x225170(0x252)]['fill']=_0x225170(0x236);}await delay(0x3e8);for(let _0x2a80c4=0x0;_0x2a80c4<=0x7;_0x2a80c4++){document[_0x225170(0x21a)](_0x225170(0x269)+_0x2a80c4)['style'][_0x225170(0x22f)]=_0x225170(0x236);}document['getElementById'](_0x3ac76e)['style'][_0x225170(0x22f)]=_0x4c7b32;}catch(_0x884e8){console[_0x225170(0x223)](_0x225170(0x24a),_0x884e8);}};export async function notiMessage(_0x19d6d2,_0x574243,_0x2032bf=![]){const _0x302ce8=a0_0x24d0a0;var _0x4a8e1f=document[_0x302ce8(0x21a)](_0x302ce8(0x230));const _0x3e07d0=parseInt(await getData(gameName,'0',_0x302ce8(0x1f2)))||0x0;_0x4a8e1f[_0x302ce8(0x252)][_0x302ce8(0x210)]===_0x302ce8(0x21e)&&(clearTimeout(messageTimeout),_0x4a8e1f[_0x302ce8(0x252)][_0x302ce8(0x210)]='0'),_0x4a8e1f[_0x302ce8(0x249)]=_0x19d6d2,_0x4a8e1f[_0x302ce8(0x252)][_0x302ce8(0x210)]=_0x302ce8(0x21e),messageTimeout=setTimeout(()=>{const _0x43451a=_0x302ce8;_0x4a8e1f[_0x43451a(0x249)]='['+_0x3e07d0+']\x20'+gameName[_0x43451a(0x231)](0x0,gameName[_0x43451a(0x216)]('.')),_0x4a8e1f[_0x43451a(0x252)][_0x43451a(0x210)]=_0x43451a(0x21e);},_0x574243),_0x2032bf&&(canvas['classList'][_0x302ce8(0x227)]('visible'),setTimeout(()=>{const _0x1585ec=_0x302ce8;canvas[_0x1585ec(0x26d)]['remove'](_0x1585ec(0x268));},0x258));}export async function FSSync(){const _0x10eb75=a0_0x24d0a0;Module[_0x10eb75(0x24b)]();}export const rewind=_0x1f6f18=>Module[a0_0x24d0a0(0x211)]?.(_0x1f6f18)||null;