const a0_0xfbd8e8=a0_0x34b7;(function(_0x6681ec,_0x10b082){const _0xe6dab=a0_0x34b7,_0x3d3152=_0x6681ec();while(!![]){try{const _0x2e91d1=-parseInt(_0xe6dab(0x218))/0x1*(-parseInt(_0xe6dab(0x222))/0x2)+parseInt(_0xe6dab(0x268))/0x3+parseInt(_0xe6dab(0x273))/0x4*(-parseInt(_0xe6dab(0x250))/0x5)+-parseInt(_0xe6dab(0x251))/0x6*(-parseInt(_0xe6dab(0x234))/0x7)+-parseInt(_0xe6dab(0x205))/0x8+parseInt(_0xe6dab(0x254))/0x9*(parseInt(_0xe6dab(0x245))/0xa)+parseInt(_0xe6dab(0x232))/0xb;if(_0x2e91d1===_0x10b082)break;else _0x3d3152['push'](_0x3d3152['shift']());}catch(_0x299d56){_0x3d3152['push'](_0x3d3152['shift']());}}}(a0_0x5429,0x3252c));import a0_0x2a472d from'../core/1.1.0/mgba.js';import a0_0x2d2ebb from'../core/2.0.0/mgba.js';import*as a0_0x389388 from'./gamepad.js';import{localStorageFile}from'./storage.js';import{dpUploadFile}from'./cloud.js';import{shaderData}from'./setting.js';import{wrapContent}from'./state.js';const versions={'1.1.0':a0_0x2a472d,'2.0.0':a0_0x2d2ebb};let currentVersion=localStorage['getItem'](a0_0xfbd8e8(0x262))||a0_0xfbd8e8(0x231),mGBA=versions[currentVersion];document[a0_0xfbd8e8(0x25c)]('GBAver')['textContent']=a0_0xfbd8e8(0x20e)+currentVersion,document[a0_0xfbd8e8(0x25c)]('GBAver')[a0_0xfbd8e8(0x24e)](a0_0xfbd8e8(0x23d),()=>{const _0x33510e=a0_0xfbd8e8,_0x1804fe=Object[_0x33510e(0x267)](versions);let _0x1b2506=_0x1804fe[_0x33510e(0x272)](currentVersion);currentVersion=_0x1804fe[(_0x1b2506+0x1)%_0x1804fe[_0x33510e(0x235)]],localStorage['setItem'](_0x33510e(0x262),currentVersion),document[_0x33510e(0x25c)](_0x33510e(0x262))[_0x33510e(0x277)]=_0x33510e(0x20e)+currentVersion,setTimeout(()=>{const _0x1eb94d=_0x33510e;window[_0x1eb94d(0x20b)][_0x1eb94d(0x24f)]();},0x3e8);});const Module={'canvas':document['getElementById'](a0_0xfbd8e8(0x221))};function initializeCore(_0x1805f0,_0x4a5207){const _0x1dddec=a0_0xfbd8e8;_0x1805f0(_0x4a5207)[_0x1dddec(0x212)](function(_0x2cde8b){const _0x4e47c4=_0x1dddec;_0x2cde8b[_0x4e47c4(0x1f7)]();});}initializeCore(mGBA,Module);let countAutoSave=0x0,countUpload=0x0;const canvas=document['getElementById'](a0_0xfbd8e8(0x221)),controlSetting=document[a0_0xfbd8e8(0x25c)]('control-setting');function handleVisibilityChange(_0x409316){const _0x19989a=a0_0xfbd8e8;document[_0x19989a(0x25f)]===_0x19989a(0x25e)||_0x409316?.[_0x19989a(0x259)]===_0x19989a(0x20f)||_0x409316?.[_0x19989a(0x25d)]?(Module[_0x19989a(0x1fc)](),pauseGame(),canvas['classList'][_0x19989a(0x229)](_0x19989a(0x1fe))):(setTimeout(()=>{const _0x4f8033=_0x19989a;canvas[_0x4f8033(0x22e)][_0x4f8033(0x1f4)](_0x4f8033(0x1fe));},0x258),controlSetting[_0x19989a(0x22e)][_0x19989a(0x26e)](_0x19989a(0x1fe))&&resumeGame());}async function statusShow(){const _0x49238d=a0_0xfbd8e8;document[_0x49238d(0x24e)](_0x49238d(0x201),handleVisibilityChange),document[_0x49238d(0x24e)](_0x49238d(0x21c),handleVisibilityChange),window['addEventListener'](_0x49238d(0x20f),handleVisibilityChange),restoreArea(),startTimer(),await a0_0x389388[_0x49238d(0x200)](parseInt(await getData(gameName,'0',_0x49238d(0x20a)))),await delay(0xc8),await Module['SDL2'](),await delay(0x320),await led(parseInt(await getData(gameName,'0',_0x49238d(0x223)))),await notiMessage(gameVer,0x3e8),await wrapContent();}async function saveStatePeriodically(){const _0x1ee840=a0_0xfbd8e8;await ledSave('#20A5A6'),await Module[_0x1ee840(0x253)](0x0),await Module[_0x1ee840(0x1fc)](),await screenShot(0x0),console['log'](_0x1ee840(0x275)+ ++countAutoSave+_0x1ee840(0x216));}async function saveStateInCloud(){const _0x368878=a0_0xfbd8e8,_0x969c42=gameName['replace'](/\.(zip|gb|gbc|gba)$/,_0x368878(0x23c)),_0x4f7fe0=localStorage[_0x368878(0x204)]('uId');navigator[_0x368878(0x1fa)]&&(_0x4f7fe0&&(await ledSave(_0x368878(0x225)),await delay(0x3e8),await dpUploadFile(_0x969c42,Module[_0x368878(0x257)](_0x368878(0x25a)+_0x969c42),_0x368878(0x243)),await lockNoti('',_0x368878(0x211)+ ++countUpload+_0x368878(0x216),0x7d0)));}function startTimer(){let [_0x46fb6d,_0x12df91,_0x8a455c,_0xd4f7a6,_0x37d2ce]=[0x0,0x0,0x0,0x0,0x0];setInterval(()=>{const _0xe9be13=a0_0x34b7;_0x8a455c++,_0xd4f7a6++,_0x37d2ce++;if(_0x8a455c===0x3c)[_0x8a455c,_0x12df91]=[0x0,_0x12df91+0x1];if(_0x12df91===0x3c)[_0x12df91,_0x46fb6d]=[0x0,_0x46fb6d+0x1];document[_0xe9be13(0x25c)](_0xe9be13(0x236))[_0xe9be13(0x277)]=_0x46fb6d+'h'+_0x12df91[_0xe9be13(0x242)]()[_0xe9be13(0x252)](0x2,'0')+'.'+_0x8a455c[_0xe9be13(0x242)]()[_0xe9be13(0x252)](0x2,'0');_0xd4f7a6===0x3c&&(saveStatePeriodically(),_0xd4f7a6=0x0);;_0x37d2ce===0x708&&(saveStateInCloud(),_0x37d2ce=0x0);;},0x3e8);}export async function uploadGame(_0x311b09){const _0x19df14=a0_0xfbd8e8,_0x4218d8=_0x311b09['files'][0x0];Module[_0x19df14(0x203)](_0x4218d8,()=>{const _0x5088f4=_0x19df14;Module[_0x5088f4(0x1fc)]();});}export async function loadGame(_0x1f34fb){const _0x2db5de=a0_0xfbd8e8,_0x534449=_0x1f34fb[_0x2db5de(0x274)](/\.(gba|gbc|gb|zip)$/,_0x2db5de(0x23c)),_0x4c8e72=Module['listFiles'](_0x2db5de(0x230))['filter'](_0xe597a4=>_0xe597a4!=='.'&&_0xe597a4!=='..');intro[_0x2db5de(0x22e)][_0x2db5de(0x229)](_0x2db5de(0x23b)),errorLogElements[0x0]['style']['bottom']='0',ingame[_0x2db5de(0x22e)][_0x2db5de(0x1f4)]('disable'),_0x1f34fb[_0x2db5de(0x266)](_0x2db5de(0x1f8))||_0x1f34fb['endsWith'](_0x2db5de(0x1f3))?(canvas[_0x2db5de(0x22e)][_0x2db5de(0x229)]('gbc'),areaTrans[_0x2db5de(0x22e)][_0x2db5de(0x229)](_0x2db5de(0x1f9)),localStorage[_0x2db5de(0x22c)]('screenSize',_0x2db5de(0x1fd)+(window[_0x2db5de(0x1ff)]-0xe6)+','+(window[_0x2db5de(0x1ff)]-0xe6)*0x9/0xa)):localStorage[_0x2db5de(0x22c)](_0x2db5de(0x22f),_0x2db5de(0x1fd)+(window[_0x2db5de(0x1ff)]-0x96)+','+(window['innerWidth']-0x96)*0x2/0x3),_0x4c8e72[_0x2db5de(0x1f5)](_0x534449)?(await Module[_0x2db5de(0x261)](_0x2db5de(0x21f)+_0x1f34fb),confirm(_0x2db5de(0x24d))&&(await delay(0x64),await Module['loadState'](0x0),await shaderData())):(await Module[_0x2db5de(0x261)](_0x2db5de(0x21f)+_0x1f34fb),await shaderData()),await statusShow();}export async function saveState(_0x2f98e6){const _0xf6c4a=a0_0xfbd8e8;await Module[_0xf6c4a(0x253)](_0x2f98e6);}export async function loadState(_0x353014){const _0x30deaf=a0_0xfbd8e8;await Module[_0x30deaf(0x214)](_0x353014);}export async function downloadFile(_0x31bb89,_0x5de2c9){const _0x279157=a0_0xfbd8e8,_0x559d6d=Module[_0x279157(0x257)](_0x31bb89),_0x35200d=document[_0x279157(0x269)]('a');document['body']['appendChild'](_0x35200d),_0x35200d[_0x279157(0x244)]=_0x5de2c9;const _0x4940bc=new Blob([_0x559d6d],{'type':_0x279157(0x21b)});_0x35200d[_0x279157(0x224)]=URL['createObjectURL'](_0x4940bc),_0x35200d['click'](),URL[_0x279157(0x206)](_0x4940bc),_0x35200d[_0x279157(0x1f4)]();}export function downloadFileInCloud(_0x1c40f5){const _0x1f7ae3=a0_0xfbd8e8;try{const _0xe20237=Module[_0x1f7ae3(0x257)](_0x1c40f5);return _0xe20237;}catch(_0x53260f){return null;}}export async function uploadFileInCloud(_0x4fc28e){const _0xed51ac=a0_0xfbd8e8;Module[_0xed51ac(0x25b)](_0x4fc28e,async()=>{localStorageFile(),await Module['FSSync']();});}export async function uploadFile(_0x4db490){const _0x24d3ee=a0_0xfbd8e8,_0x4ec1ae=_0x4db490['files'][0x0];Module[_0x24d3ee(0x25b)](_0x4ec1ae,async()=>{const _0x4e11ab=_0x24d3ee;localStorageFile(),await Module[_0x4e11ab(0x1fc)]();});}export async function editFile(_0x488b4c,_0x1c7b9f,_0x4a2515){const _0x25599b=a0_0xfbd8e8;await Module[_0x25599b(0x247)](_0x488b4c,_0x1c7b9f,_0x4a2515);}export async function deleteFile(_0x53fc3e){const _0x1dd5e7=a0_0xfbd8e8;try{return await Module[_0x1dd5e7(0x219)](_0x53fc3e),!![];}catch(_0x36b437){return console[_0x1dd5e7(0x265)](_0x53fc3e),null;}}export function listFiles(_0xc18fa5){const _0x5c66f7=a0_0xfbd8e8,_0x1c9ac0=Module[_0x5c66f7(0x264)](_0xc18fa5)[_0x5c66f7(0x240)](_0x5bb31b=>_0x5bb31b!=='.'&&_0x5bb31b!=='..');return _0x1c9ac0;}export function listGame(){const _0x123174=a0_0xfbd8e8,_0x109431=Module[_0x123174(0x22d)]()['filter'](_0x4e90da=>_0x4e90da!=='.'&&_0x4e90da!=='..');return _0x109431;}function a0_0x34b7(_0x45cf7e,_0x38629b){const _0x54292a=a0_0x5429();return a0_0x34b7=function(_0x34b712,_0x5521f4){_0x34b712=_0x34b712-0x1f3;let _0x36a497=_0x54292a[_0x34b712];return _0x36a497;},a0_0x34b7(_0x45cf7e,_0x38629b);}export function listSave(){const _0x680be5=a0_0xfbd8e8,_0xb42dc2=Module[_0x680be5(0x248)]()[_0x680be5(0x240)](_0x40e5e4=>_0x40e5e4!=='.'&&_0x40e5e4!=='..');return _0xb42dc2;}export function listState(){const _0x56c9fb=a0_0xfbd8e8,_0x2972c9=Module[_0x56c9fb(0x22a)]()['filter'](_0x965442=>_0x965442!=='.'&&_0x965442!=='..');return _0x2972c9;}export function listCheat(){const _0x2436da=a0_0xfbd8e8,_0xcbb989=Module[_0x2436da(0x226)]()[_0x2436da(0x240)](_0x475750=>_0x475750!=='.'&&_0x475750!=='..');return _0xcbb989;}export function listScreenshot(){const _0x312cf6=a0_0xfbd8e8,_0x533603=Module[_0x312cf6(0x202)]()[_0x312cf6(0x240)](_0x504fce=>_0x504fce!=='.'&&_0x504fce!=='..');return _0x533603;}export function fileSize(_0x969bda){const _0x55dfe6=Module['fileSize'](_0x969bda);return _0x55dfe6;}export async function resumeGame(){const _0x401cb9=a0_0xfbd8e8;Module[_0x401cb9(0x1f6)](),Module['SDL2'](),notiMessage(_0x401cb9(0x21e),0x7d0);}export async function pauseGame(){const _0x103f2b=a0_0xfbd8e8;Module[_0x103f2b(0x270)](),Module[_0x103f2b(0x228)](),notiMessage(_0x103f2b(0x276),0x7d0);}export async function buttonPress(_0x1a5498){const _0x542e5b=a0_0xfbd8e8;Module[_0x542e5b(0x256)](_0x1a5498);}export async function buttonUnpress(_0x49c556){const _0x58a34f=a0_0xfbd8e8;Module[_0x58a34f(0x227)](_0x49c556);}export async function screenShot(_0x3c61ca){const _0x4c4748=a0_0xfbd8e8,_0x1be112=gameName[_0x4c4748(0x274)](/\.(gba|gbc|gb|zip)$/,'_'+_0x3c61ca+_0x4c4748(0x20c)),_0x9f4cd6=await getData(gameName,_0x3c61ca,_0x4c4748(0x271))||'';console[_0x4c4748(0x21a)](_0x9f4cd6),await Module[_0x4c4748(0x23e)](_0x1be112),await setData(gameName,_0x3c61ca,_0x4c4748(0x26c),formatDateTime(Date['now']()),_0x9f4cd6);}export async function dowloadScreenShot(_0x7dbc98){const _0x3144b1=a0_0xfbd8e8;try{const _0x319cf6=await fileToBase64(Module[_0x3144b1(0x257)](_0x7dbc98));return _0x319cf6;}catch{}}function a0_0x5429(){const _0x327c63=['endsWith','keys','248307BSOxGO','createElement','/data/screenshots/','substring','saveTime','split','contains','noti-mess','pauseGame','All','indexOf','3148SShagD','replace','Auto\x20save\x20','Paused!','textContent','.gb','remove','includes','resumeGame','FSInit','.gbc','gbc1','onLine','exec','FSSync','0,0,','visible','innerWidth','turboF','pagehide','listScreenshots','uploadRom','getItem','2954648WlQGCz','revokeObjectURL','rgba(245,\x20232,\x20209,\x200.4)','\x20:\x20','Error\x20ledSave:','turboState','location','.png','map','Wasm_Â©','beforeunload','entries','Cloud\x20upload\x20','then','led04','loadState','led0','\x20time(s)','toggleRewind','11243AWFifh','deleteFile','log','application/octet-stream','visibilitychange','led06','Resumed!','/data/games/','autoLoadCheats','canvas','58bHlWXP','slotStateSaved','href','#E0C068','listCheats','buttonUnpress','SDL2','add','listStates','\x5cs*:\x5cs*(.*?)\x5cs*(?=\x5c||$)','setItem','listRoms','classList','screenSize','states','1.1.0','382954ozUEqj','led02','17661LhDTFQ','length','timer','trim','0.4','style','concat','disable','.ss0','click','screenshot','\x20|\x20','filter','fill','toString','state','download','10qXEGXF','image/png','editFileName','listSaves','opacity','led00','lastIndexOf','tEXtComment\x00','Do\x20you\x20want\x20to\x20load\x20save\x20state?','addEventListener','reload','2175UWkXCO','978waDmtG','padStart','saveState','566289FuBKPi','led07','buttonPress','downloadFile','led05','type','/data/states/','uploadAll','getElementById','persisted','hidden','visibilityState','led03','loadGame','GBAver','setVolume','listFiles','error'];a0_0x5429=function(){return _0x327c63;};return a0_0x5429();}export async function captureOCR(_0x25253a){const _0x48f0a4=a0_0xfbd8e8;Module['screenshot'](_0x25253a);const _0x32f87a=Module['downloadFile'](_0x48f0a4(0x26a)+_0x25253a);return _0x32f87a;}export async function setFastForwardMultiplier(_0x4b22e1){Module['setFastForwardMultiplier'](_0x4b22e1);}export async function uploadCheats(_0x38eddc){const _0xfa4e27=a0_0xfbd8e8;Module[_0xfa4e27(0x220)](),Module[_0xfa4e27(0x25b)](_0x38eddc,async()=>{});}export function setVolume(_0x26d0b5){const _0x7db8ef=a0_0xfbd8e8;Module[_0x7db8ef(0x263)](_0x26d0b5);}export async function setData(_0x3c7d36,_0x6956b8,_0x1fb015,_0x1876ad,_0x3eed01=''){const _0x360e34=a0_0xfbd8e8,_0x1df008=_0x3c7d36[_0x360e34(0x274)](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x3afa4b=_0x360e34(0x26a)+_0x1df008+'_'+_0x6956b8+_0x360e34(0x20c);let _0x4173ff;try{_0x4173ff=await fileToBase64(Module[_0x360e34(0x257)](_0x3afa4b));}catch(_0x2e4f90){await Module[_0x360e34(0x23e)](_0x1df008+'_'+_0x6956b8+_0x360e34(0x20c)),await delay(0xc8),_0x4173ff=await fileToBase64(Module[_0x360e34(0x257)](_0x3afa4b));}let _0x393653=atob(_0x4173ff[_0x360e34(0x26d)](',')[0x1]),_0x13edda=_0x360e34(0x24c),_0x246ba3=_0x393653['indexOf'](_0x13edda),_0x32b5c7={};if(_0x246ba3!==-0x1||_0x3eed01[_0x360e34(0x237)]()!==''){let _0x4ca3c2=_0x246ba3!==-0x1?_0x393653[_0x360e34(0x26b)](_0x246ba3+_0x13edda[_0x360e34(0x235)]):_0x3eed01,_0x416131=/(\w+)\s*:\s*([^|]*)/g,_0x46c8bd;while((_0x46c8bd=_0x416131[_0x360e34(0x1fb)](_0x4ca3c2))!==null){_0x32b5c7[_0x46c8bd[0x1][_0x360e34(0x237)]()]=_0x46c8bd[0x2][_0x360e34(0x237)]();}_0x246ba3!==-0x1&&(_0x393653=_0x393653['substring'](0x0,_0x246ba3));}_0x32b5c7[_0x1fb015]=_0x1876ad;let _0x111b7b=Object[_0x360e34(0x210)](_0x32b5c7)[_0x360e34(0x20d)](([_0x4f80a4,_0x35335e])=>_0x4f80a4+_0x360e34(0x208)+_0x35335e)['join'](_0x360e34(0x23f)),_0x46dd83=new TextEncoder()['encode'](_0x13edda+'\x20'+_0x111b7b),_0x69586e=new Uint8Array([..._0x393653]['map'](_0x59332e=>_0x59332e['charCodeAt'](0x0))[_0x360e34(0x23a)]([..._0x46dd83])),_0x4074c5=new File([new Blob([_0x69586e],{'type':'image/png'})],_0x1df008+'_'+_0x6956b8+'.png',{'type':_0x360e34(0x246)});Module['uploadAll'](_0x4074c5,async()=>{});}export async function getData(_0x45ff05,_0xed3fff,_0xdf8019){const _0x27252b=a0_0xfbd8e8;try{const _0x2a9da5=_0x45ff05['replace'](/\.(gba|gbc|gb|zip|cheats)$/,''),_0x5e43d7=_0x27252b(0x26a)+_0x2a9da5+'_'+_0xed3fff+_0x27252b(0x20c);let _0x4068a7;try{_0x4068a7=await fileToBase64(Module[_0x27252b(0x257)](_0x5e43d7));}catch(_0x3b2ad0){return null;}let _0x102c3c=atob(_0x4068a7[_0x27252b(0x26d)](',')[0x1]),_0x567b39='tEXtComment\x00',_0xae69d0=_0x102c3c['indexOf'](_0x567b39);if(_0xae69d0!==-0x1){let _0x36f0c4=_0x102c3c[_0x27252b(0x26b)](_0xae69d0+_0x567b39[_0x27252b(0x235)]);if(_0xdf8019===_0x27252b(0x271))return _0x36f0c4[_0x27252b(0x237)]();let _0x4ab983=new RegExp(_0xdf8019+_0x27252b(0x22b)),_0xc39cab=_0x36f0c4['match'](_0x4ab983);if(_0xc39cab)return _0xc39cab[0x1][_0x27252b(0x237)]();}}catch(_0x15aefe){return console[_0x27252b(0x265)]({'romName':_0x45ff05,'slot':_0xed3fff,'type':_0xdf8019}),null;}}export async function ledSave(_0x50dc5e){const _0x595e26=a0_0xfbd8e8,_0x4b6d07=parseInt(await getData(gameName,'0',_0x595e26(0x223))),_0x40f476=_0x4b6d07===0x1?'led01':_0x4b6d07===0x2?_0x595e26(0x233):_0x4b6d07===0x3?_0x595e26(0x260):_0x4b6d07===0x4?_0x595e26(0x213):_0x4b6d07===0x5?_0x595e26(0x258):_0x4b6d07===0x6?_0x595e26(0x21d):_0x4b6d07===0x7?_0x595e26(0x255):_0x595e26(0x24a);try{for(let _0x123100=0x0;_0x123100<=0x7;_0x123100++){document['getElementById'](_0x595e26(0x215)+_0x123100)[_0x595e26(0x239)][_0x595e26(0x241)]=_0x595e26(0x207);}await delay(0x3e8);for(let _0x2d8d1d=0x0;_0x2d8d1d<=0x7;_0x2d8d1d++){document[_0x595e26(0x25c)](_0x595e26(0x215)+_0x2d8d1d)[_0x595e26(0x239)]['fill']=_0x595e26(0x207);}document['getElementById'](_0x40f476)[_0x595e26(0x239)][_0x595e26(0x241)]=_0x50dc5e;}catch(_0x46e61e){console['error'](_0x595e26(0x209),_0x46e61e);}};export async function notiMessage(_0x47faaf,_0x4d5a82,_0x3f051b=![]){const _0x565363=a0_0xfbd8e8;var _0xe6741e=document[_0x565363(0x25c)](_0x565363(0x26f));const _0x4cb6e9=parseInt(await getData(gameName,'0',_0x565363(0x223)))||0x0;_0xe6741e['style']['opacity']===_0x565363(0x238)&&(clearTimeout(messageTimeout),_0xe6741e['style'][_0x565363(0x249)]='0'),_0xe6741e[_0x565363(0x277)]=_0x47faaf,_0xe6741e[_0x565363(0x239)]['opacity']=_0x565363(0x238),messageTimeout=setTimeout(()=>{const _0x3a4d90=_0x565363;_0xe6741e['textContent']='['+_0x4cb6e9+']\x20'+gameName[_0x3a4d90(0x26b)](0x0,gameName[_0x3a4d90(0x24b)]('.')),_0xe6741e[_0x3a4d90(0x239)]['opacity']=_0x3a4d90(0x238);},_0x4d5a82),_0x3f051b&&(canvas['classList'][_0x565363(0x229)](_0x565363(0x1fe)),setTimeout(()=>{const _0x49d489=_0x565363;canvas[_0x49d489(0x22e)]['remove'](_0x49d489(0x1fe));},0x258));}export async function FSSync(){const _0xcdd596=a0_0xfbd8e8;Module[_0xcdd596(0x1fc)]();}export const rewind=_0x9cb6d6=>Module[a0_0xfbd8e8(0x217)]?.(_0x9cb6d6)||null;