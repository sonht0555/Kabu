const a0_0x4d2805=a0_0x1ae9;(function(_0x3c7d4e,_0x136e57){const _0x1d9f59=a0_0x1ae9,_0x484dfd=_0x3c7d4e();while(!![]){try{const _0x4b841e=-parseInt(_0x1d9f59(0x165))/0x1+parseInt(_0x1d9f59(0x146))/0x2*(parseInt(_0x1d9f59(0x14c))/0x3)+-parseInt(_0x1d9f59(0x130))/0x4*(parseInt(_0x1d9f59(0x11c))/0x5)+-parseInt(_0x1d9f59(0x11d))/0x6+parseInt(_0x1d9f59(0x155))/0x7*(-parseInt(_0x1d9f59(0x113))/0x8)+-parseInt(_0x1d9f59(0x14a))/0x9*(parseInt(_0x1d9f59(0x167))/0xa)+-parseInt(_0x1d9f59(0x169))/0xb*(-parseInt(_0x1d9f59(0x13f))/0xc);if(_0x4b841e===_0x136e57)break;else _0x484dfd['push'](_0x484dfd['shift']());}catch(_0x30e704){_0x484dfd['push'](_0x484dfd['shift']());}}}(a0_0x98fd,0x559b5));var wasmAudioBuf,wasmSaveBuf,gameID,romFileName,drawContext,idata,imgFrameBuffer,scriptProcessor,audioContext;const AUDIO_BLOCK_SIZE=0x400,AUDIO_FIFO_MAXLEN=0x1324;var audioFifo0=new Int16Array(AUDIO_FIFO_MAXLEN),audioFifo1=new Int16Array(AUDIO_FIFO_MAXLEN),romBuffer=-0x1,isRunning=![];const wasmSaveBufLen=0x20000+0x2000;var tmpSaveBuf=new Uint8Array(wasmSaveBufLen),audioFifoHead=0x0,audioFifoCnt=0x0,lastCheckedSaveState=0x0,muteMode=![],fastForwardMode=![];let vkState=0x0;var frameCnt=0x0;const fileInput=document[a0_0x4d2805(0x11f)]('romFile'),canvas=document[a0_0x4d2805(0x11f)](a0_0x4d2805(0x136)),saveButton=document[a0_0x4d2805(0x11f)](a0_0x4d2805(0x135)),loadButton=document[a0_0x4d2805(0x11f)]('loadStateButton');function processAudio(_0x41c2af){const _0x4f2824=a0_0x4d2805;var _0x4b2304=_0x41c2af['outputBuffer'],_0x160cac=_0x4b2304[_0x4f2824(0x15c)](0x0),_0x45e1c7=_0x4b2304[_0x4f2824(0x15c)](0x1);if(!isRunning||fastForwardMode||muteMode){for(var _0x306a15=0x0;_0x306a15<AUDIO_BLOCK_SIZE;_0x306a15++){_0x160cac[_0x306a15]=0x0,_0x45e1c7[_0x306a15]=0x0;}return;}while(audioFifoCnt<AUDIO_BLOCK_SIZE){emuLoop();}var _0x5cab74=AUDIO_BLOCK_SIZE;audioFifoCnt<_0x5cab74&&(_0x5cab74=audioFifoCnt);for(var _0x306a15=0x0;_0x306a15<_0x5cab74;_0x306a15++){_0x160cac[_0x306a15]=audioFifo0[audioFifoHead]/0x8000,_0x45e1c7[_0x306a15]=audioFifo1[audioFifoHead]/0x8000,audioFifoHead=(audioFifoHead+0x1)%AUDIO_FIFO_MAXLEN,audioFifoCnt--;}}function tryInitSound(){const _0x9ce375=a0_0x4d2805;if(audioContext){audioContext[_0x9ce375(0x126)]!='running'&&audioContext[_0x9ce375(0x10a)]();return;}try{audioContext=new(window[(_0x9ce375(0x13c))]||window['webkitAudioContext'])({'latencyHint':0.0001,'sampleRate':0xbb80}),scriptProcessor=audioContext[_0x9ce375(0x162)](AUDIO_BLOCK_SIZE,0x0,0x2),scriptProcessor[_0x9ce375(0x139)]=processAudio,scriptProcessor[_0x9ce375(0x142)](audioContext[_0x9ce375(0x10b)]),audioContext[_0x9ce375(0x10a)]();}catch(_0x1143db){console['log'](_0x1143db);}}function writeAudio(_0x3742a3,_0x3006a1){const _0x1dd754=a0_0x4d2805;if(fastForwardMode)return;!wasmAudioBuf&&(wasmAudioBuf=new Int16Array(Module[_0x1dd754(0x13b)][_0x1dd754(0x12d)])[_0x1dd754(0x138)](_0x3742a3/0x2,_0x3742a3/0x2+0x800));var _0x4d6aaf=(audioFifoHead+audioFifoCnt)%AUDIO_FIFO_MAXLEN;if(audioFifoCnt+_0x3006a1>=AUDIO_FIFO_MAXLEN)return;for(var _0x3857dc=0x0;_0x3857dc<_0x3006a1;_0x3857dc++){audioFifo0[_0x4d6aaf]=wasmAudioBuf[_0x3857dc*0x2],audioFifo1[_0x4d6aaf]=wasmAudioBuf[_0x3857dc*0x2+0x1],_0x4d6aaf=(_0x4d6aaf+0x1)%AUDIO_FIFO_MAXLEN;}audioFifoCnt+=_0x3006a1;}function a0_0x98fd(){const _0x405796=['/data/states/game.sav','src','216633noqxep','Up-left','26910vYltxh','objectStoreNames','275cFRTmd','set','slice','resume','destination','DOMContentLoaded','onload','/data/states/','objectStore','has','Down-right','putImageData','300360aVsRfe','continue','clientX','elementFromPoint','log','classList','fromCharCode','_emuUpdateSavChangeFlag','includes','10GrYehJ','359442AdGtHh','body','getElementById','Up-right','split','_emuSaveState','appendChild','onsuccess','clientY','state','_emuRunFrame','key','bound','/data','_free','_emuLoadROM','buffer','addEventListener','/data/states/game.ss1','262536jPcKPQ','Left','createElement','_emuLoadState','readwrite','saveStateButton','canvas','openCursor','subarray','onaudioprocess','identifier','HEAPU8','AudioContext','[id]','get','333708VqwJOo','closest','target','connect','toDataURL','FILE_DATA','Right','644tZmyUu','substring','toLowerCase','click','1377rPvFwh','open','6174MXsMUR','_malloc','length','_emuGetSymbol','result','touchend','delete','Start','Auto\x20saving...','35WXuxMG','requestAnimationFrame','contains','onupgradeneeded','remove','transaction','img','getChannelData','changedTouches','Down','_emuResetCpu','getContext','lastIndexOf','createScriptProcessor'];a0_0x98fd=function(){return _0x405796;};return a0_0x98fd();}function wasmReady(){const _0x4cf105=a0_0x4d2805;romBuffer=Module[_0x4cf105(0x14f)](0x1);var _0x267799=Module[_0x4cf105(0x14f)](0x2);wasmSaveBuf=Module[_0x4cf105(0x13b)]['subarray'](_0x267799,_0x267799+wasmSaveBufLen),_0x267799=Module[_0x4cf105(0x14f)](0x3),imgFrameBuffer=new Uint8ClampedArray(Module[_0x4cf105(0x13b)][_0x4cf105(0x12d)])['subarray'](_0x267799,_0x267799+0xf0*0xa0*0x4),idata=new ImageData(imgFrameBuffer,0xf0,0xa0);}function capture(){const _0x1f1f30=a0_0x4d2805,_0x39d14a=canvas[_0x1f1f30(0x143)]('image/png'),_0x1d064e=document[_0x1f1f30(0x132)](_0x1f1f30(0x15b));return _0x1d064e[_0x1f1f30(0x164)]=_0x39d14a,document[_0x1f1f30(0x11e)][_0x1f1f30(0x123)](_0x1d064e),_0x39d14a;}function emuLoop(){const _0x2e4b8a=a0_0x4d2805;isRunning&&(frameCnt++,frameCnt%0x78==0x0&&checkSave(),Module[_0x2e4b8a(0x127)](vkState),drawContext=canvas[_0x2e4b8a(0x160)]('2d'),drawContext[_0x2e4b8a(0x112)](idata,0x0,0x0));}function loop(){const _0x5336d7=a0_0x4d2805;emuLoop(),window[_0x5336d7(0x156)](loop);}function writeToIndexedDB(_0x461740,_0x51eaa5){const _0x50303d=a0_0x4d2805,_0x3816d3=indexedDB[_0x50303d(0x14b)](_0x50303d(0x12a));_0x3816d3[_0x50303d(0x124)]=_0x355fb2=>{const _0x5b16b5=_0x50303d,_0xdebe07=_0x355fb2[_0x5b16b5(0x141)]['result'],_0x132980=_0xdebe07[_0x5b16b5(0x15a)](_0x5b16b5(0x144),_0x5b16b5(0x134)),_0x523e24=_0x132980[_0x5b16b5(0x10f)]('FILE_DATA');_0x523e24['put'](_0x51eaa5,_0x461740);};}function readFromIndexedDB(_0x4ac0f0){return new Promise(_0x598202=>{const _0x582d96=a0_0x1ae9,_0x64ff36=indexedDB['open'](_0x582d96(0x12a));_0x64ff36[_0x582d96(0x124)]=_0x22fc5b=>{const _0x5b5403=_0x582d96,_0x16b947=_0x22fc5b[_0x5b5403(0x141)][_0x5b5403(0x150)],_0x249edd=_0x16b947[_0x5b5403(0x15a)](_0x5b5403(0x144),'readonly'),_0x55d673=_0x249edd[_0x5b5403(0x10f)](_0x5b5403(0x144)),_0x575889=_0x55d673['get'](_0x4ac0f0);_0x575889[_0x5b5403(0x124)]=_0x211af6=>_0x598202(_0x211af6[_0x5b5403(0x141)][_0x5b5403(0x150)]);};});}function loadGameFromInput(){const _0x4f78bd=a0_0x4d2805;tryInitSound();var _0x5c623b=fileInput['files'][0x0];romFileName=_0x5c623b['name'];var _0x21102e=new FileReader();_0x21102e[_0x4f78bd(0x10d)]=function(_0x4838c8){const _0x383c7f=_0x4f78bd;var _0x27f128=_0x4838c8[_0x383c7f(0x141)]['result'],_0x1f4e55=new Uint8Array(_0x27f128);gameID='';for(var _0x32a43f=0xac;_0x32a43f<0xb2;_0x32a43f++){gameID+=String[_0x383c7f(0x119)](_0x1f4e55[_0x32a43f]);}console[_0x383c7f(0x117)]('gameID',gameID),Module[_0x383c7f(0x13b)][_0x383c7f(0x16a)](_0x1f4e55,romBuffer),Module[_0x383c7f(0x12c)](_0x1f4e55[_0x383c7f(0x14e)]),loadSave(),Module[_0x383c7f(0x15f)]();},_0x21102e['readAsArrayBuffer'](_0x5c623b);}async function loadSave(){const _0x2c1f05=a0_0x4d2805,_0xa7019b=await readFromIndexedDB(_0x2c1f05(0x163));_0xa7019b&&wasmSaveBuf['set'](_0xa7019b),Module[_0x2c1f05(0x15f)](),lastCheckedSaveState=0x0,Module[_0x2c1f05(0x11a)](),setTimeout(()=>{isRunning=!![];},0x1f4),console['log']('load\x20done');}function checkSave(){const _0x2a1080=a0_0x4d2805;if(!isRunning)return;const _0x19733a=Module['_emuUpdateSavChangeFlag']();lastCheckedSaveState===0x1&&_0x19733a===0x0&&(tmpSaveBuf[_0x2a1080(0x16a)](wasmSaveBuf),writeToIndexedDB(_0x2a1080(0x163),tmpSaveBuf)),lastCheckedSaveState=_0x19733a,console[_0x2a1080(0x117)](_0x2a1080(0x154));}const keyMask={'a':0x1,'b':0x2,'select':0x4,'start':0x8,'right':0x10,'left':0x20,'up':0x40,'down':0x80,'r':0x100,'l':0x200};function buttonPresss(_0x60e2f7){keyMask[_0x60e2f7]&&(vkState|=keyMask[_0x60e2f7],tryInitSound());}function buttonUnpresss(_0x4107df){keyMask[_0x4107df]&&(vkState&=~keyMask[_0x4107df]);}function a0_0x1ae9(_0x447d11,_0x46e02d){const _0x98fd3e=a0_0x98fd();return a0_0x1ae9=function(_0x1ae902,_0x2f7889){_0x1ae902=_0x1ae902-0x109;let _0x2c5870=_0x98fd3e[_0x1ae902];return _0x2c5870;},a0_0x1ae9(_0x447d11,_0x46e02d);}function buttonPress(_0x1f0cbf,_0x3bb0fc){const _0x166afb=a0_0x4d2805;if(_0x1f0cbf[_0x166afb(0x11b)]('-')){const [_0x436974,_0x90dcb3]=_0x1f0cbf[_0x166afb(0x148)]()[_0x166afb(0x121)]('-');_0x3bb0fc?buttonPresss(_0x436974):buttonUnpresss(_0x436974),_0x3bb0fc?buttonPresss(_0x90dcb3):buttonUnpresss(_0x90dcb3);}else _0x3bb0fc?buttonPresss(_0x1f0cbf['toLowerCase']()):buttonUnpresss(_0x1f0cbf[_0x166afb(0x148)]());}document[a0_0x4d2805(0x12e)](a0_0x4d2805(0x10c),function(){const _0x330e87=a0_0x4d2805;loop();const _0xd6a336=['Up',_0x330e87(0x15e),_0x330e87(0x131),_0x330e87(0x145),_0x330e87(0x166),_0x330e87(0x120),'Down-left',_0x330e87(0x111)],_0x22dc98=['A','B',_0x330e87(0x153),'Select','L','R'];let _0x22f70c=new Map(),_0x13f16d=new Map();function _0x1a7216(_0x51bd54,_0x5c42c0){const _0x12c863=_0x330e87;if(!_0x51bd54)return;buttonPress(_0x51bd54,_0x5c42c0);const _0x470a28=document[_0x12c863(0x11f)](_0x51bd54);_0x470a28&&(_0x5c42c0?_0x470a28[_0x12c863(0x118)]['add']('touched'):_0x470a28['classList'][_0x12c863(0x159)]('touched'));}function _0x3574e5(_0x1717fa){const _0x48e131=_0x330e87,_0x29fcd6=document[_0x48e131(0x116)](_0x1717fa[_0x48e131(0x115)],_0x1717fa[_0x48e131(0x125)]),_0x184fbe=_0x29fcd6?.[_0x48e131(0x140)](_0x48e131(0x13d));return _0x184fbe?_0x184fbe['id']:null;}document[_0x330e87(0x12e)]('touchstart',_0x3cc1f0=>{const _0x508dac=_0x330e87;for(let _0x114663 of _0x3cc1f0[_0x508dac(0x15d)]){const _0xc92554=_0x3574e5(_0x114663);if(!_0xc92554)continue;if(_0xd6a336['includes'](_0xc92554))_0x22f70c['has'](_0x114663['identifier'])&&_0x1a7216(_0x22f70c[_0x508dac(0x13e)](_0x114663[_0x508dac(0x13a)]),![]),_0x22f70c['set'](_0x114663['identifier'],_0xc92554),_0x1a7216(_0xc92554,!![]);else _0x22dc98['includes'](_0xc92554)&&(_0x13f16d[_0x508dac(0x110)](_0x114663[_0x508dac(0x13a)])&&_0x1a7216(_0x13f16d[_0x508dac(0x13e)](_0x114663['identifier']),![]),_0x13f16d[_0x508dac(0x16a)](_0x114663[_0x508dac(0x13a)],_0xc92554),_0x1a7216(_0xc92554,!![]));}}),document[_0x330e87(0x12e)]('touchmove',_0x3dcfe6=>{const _0x2bb4cc=_0x330e87;for(let _0xa0418c of _0x3dcfe6['changedTouches']){const _0x4c9448=_0x3574e5(_0xa0418c);if(!_0x4c9448)continue;if(_0xd6a336[_0x2bb4cc(0x11b)](_0x4c9448))_0x22f70c[_0x2bb4cc(0x110)](_0xa0418c[_0x2bb4cc(0x13a)])&&_0x22f70c['get'](_0xa0418c[_0x2bb4cc(0x13a)])!==_0x4c9448&&(_0x1a7216(_0x22f70c['get'](_0xa0418c[_0x2bb4cc(0x13a)]),![]),_0x22f70c[_0x2bb4cc(0x16a)](_0xa0418c[_0x2bb4cc(0x13a)],_0x4c9448),_0x1a7216(_0x4c9448,!![]));else _0x22dc98[_0x2bb4cc(0x11b)](_0x4c9448)&&(_0x13f16d[_0x2bb4cc(0x110)](_0xa0418c[_0x2bb4cc(0x13a)])&&_0x13f16d[_0x2bb4cc(0x13e)](_0xa0418c[_0x2bb4cc(0x13a)])!==_0x4c9448&&(_0x1a7216(_0x13f16d['get'](_0xa0418c[_0x2bb4cc(0x13a)]),![]),_0x13f16d[_0x2bb4cc(0x16a)](_0xa0418c[_0x2bb4cc(0x13a)],_0x4c9448),_0x1a7216(_0x4c9448,!![])));}}),document[_0x330e87(0x12e)](_0x330e87(0x151),_0x43545c=>{const _0x479367=_0x330e87;for(let _0x1a2c32 of _0x43545c['changedTouches']){_0x22f70c[_0x479367(0x110)](_0x1a2c32['identifier'])&&(_0x1a7216(_0x22f70c[_0x479367(0x13e)](_0x1a2c32['identifier']),![]),_0x22f70c[_0x479367(0x152)](_0x1a2c32[_0x479367(0x13a)])),_0x13f16d[_0x479367(0x110)](_0x1a2c32[_0x479367(0x13a)])&&(_0x1a7216(_0x13f16d['get'](_0x1a2c32[_0x479367(0x13a)]),![]),_0x13f16d[_0x479367(0x152)](_0x1a2c32[_0x479367(0x13a)]));}}),document['addEventListener']('touchcancel',_0x363d2e=>{const _0x280fc1=_0x330e87;for(let _0x55e3ec of _0x363d2e['changedTouches']){_0x22f70c[_0x280fc1(0x110)](_0x55e3ec[_0x280fc1(0x13a)])&&(_0x1a7216(_0x22f70c[_0x280fc1(0x13e)](_0x55e3ec[_0x280fc1(0x13a)]),![]),_0x22f70c[_0x280fc1(0x152)](_0x55e3ec['identifier'])),_0x13f16d[_0x280fc1(0x110)](_0x55e3ec[_0x280fc1(0x13a)])&&(_0x1a7216(_0x13f16d[_0x280fc1(0x13e)](_0x55e3ec[_0x280fc1(0x13a)]),![]),_0x13f16d['delete'](_0x55e3ec[_0x280fc1(0x13a)]));}});}),saveButton[a0_0x4d2805(0x12e)]('click',function(){const _0x380ea9=a0_0x4d2805,_0x4efaca=Module['_malloc'](0x1e8480),_0x3c630c=Module[_0x380ea9(0x122)](_0x4efaca,0x1e8480),_0x44c906=new Uint8Array(Module[_0x380ea9(0x13b)]['buffer'],_0x4efaca,_0x3c630c)[_0x380ea9(0x109)]();Module[_0x380ea9(0x12b)](_0x4efaca),writeToIndexedDB(_0x380ea9(0x12f),_0x44c906);}),loadButton['addEventListener'](a0_0x4d2805(0x149),async function(){const _0x52252f=a0_0x4d2805,_0x2cbc14=await readFromIndexedDB(_0x52252f(0x12f)),_0x88db6b=_0x2cbc14['length'],_0x4f2581=Module[_0x52252f(0x14d)](_0x88db6b);Module[_0x52252f(0x13b)][_0x52252f(0x16a)](_0x2cbc14,_0x4f2581),Module[_0x52252f(0x133)](_0x4f2581,_0x88db6b),Module[_0x52252f(0x12b)](_0x4f2581);});function loadfile(_0xc75a9){const _0x5a1066=a0_0x4d2805,_0x3dd111=indexedDB[_0x5a1066(0x14b)]('/data');_0x3dd111[_0x5a1066(0x158)]=_0x2b19b4=>{const _0xe508b6=_0x5a1066,_0x652902=_0x2b19b4[_0xe508b6(0x141)][_0xe508b6(0x150)];!_0x652902[_0xe508b6(0x168)][_0xe508b6(0x157)](_0xe508b6(0x144))&&_0x652902['createObjectStore'](_0xe508b6(0x144));},indexedDB[_0x5a1066(0x14b)](_0x5a1066(0x12a))[_0x5a1066(0x124)]=_0x16246b=>{const _0x2c8160=_0x5a1066,_0x25d14d=_0x16246b['target'][_0x2c8160(0x150)],_0x4a8cab=IDBKeyRange[_0x2c8160(0x129)](_0xc75a9,_0xc75a9+'ï¿¿');_0x25d14d['transaction']('FILE_DATA','readonly')['objectStore'](_0x2c8160(0x144))[_0x2c8160(0x137)](_0x4a8cab)[_0x2c8160(0x124)]=_0x154db3=>{const _0x201a7a=_0x2c8160,_0x294842=_0x154db3['target'][_0x201a7a(0x150)];if(_0x294842){const _0x3ab17b=_0x294842[_0x201a7a(0x128)];console[_0x201a7a(0x117)](_0x3ab17b[_0x201a7a(0x147)](_0x3ab17b[_0x201a7a(0x161)]('/')+0x1)),_0x294842[_0x201a7a(0x114)]();}};};}loadfile(a0_0x4d2805(0x10e));