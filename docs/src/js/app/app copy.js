const a0_0x18755a=a0_0x5692;(function(_0x2bf223,_0x1cdfd9){const _0x22900e=a0_0x5692,_0x3edc2e=_0x2bf223();while(!![]){try{const _0xe0fd5f=parseInt(_0x22900e(0xfc))/0x1+parseInt(_0x22900e(0xce))/0x2*(-parseInt(_0x22900e(0xe8))/0x3)+-parseInt(_0x22900e(0xbf))/0x4+parseInt(_0x22900e(0xd8))/0x5*(-parseInt(_0x22900e(0x104))/0x6)+-parseInt(_0x22900e(0x110))/0x7+parseInt(_0x22900e(0xed))/0x8+parseInt(_0x22900e(0xc9))/0x9;if(_0xe0fd5f===_0x1cdfd9)break;else _0x3edc2e['push'](_0x3edc2e['shift']());}catch(_0x2af230){_0x3edc2e['push'](_0x3edc2e['shift']());}}}(a0_0x2fda,0x43781));var wasmAudioBuf,wasmSaveBuf,gameID,romFileName,drawContext,idata,imgFrameBuffer,scriptProcessor,audioContext;const AUDIO_BLOCK_SIZE=0x400,AUDIO_FIFO_MAXLEN=0x1324;var audioFifo0=new Int16Array(AUDIO_FIFO_MAXLEN),audioFifo1=new Int16Array(AUDIO_FIFO_MAXLEN),romBuffer=-0x1,isRunning=![];const wasmSaveBufLen=0x20000+0x2000;var tmpSaveBuf=new Uint8Array(wasmSaveBufLen),audioFifoHead=0x0,audioFifoCnt=0x0,lastCheckedSaveState=0x0,muteMode=![],fastForwardMode=![];let vkState=0x0;var frameCnt=0x0;const fileInput=document[a0_0x18755a(0xe6)](a0_0x18755a(0xf8)),canvas=document[a0_0x18755a(0xe6)]('canvas'),saveButton=document['getElementById'](a0_0x18755a(0xec)),loadButton=document[a0_0x18755a(0xe6)](a0_0x18755a(0xba));function processAudio(_0x7e841a){const _0x4afcfa=a0_0x18755a;var _0x167ea5=_0x7e841a[_0x4afcfa(0xc3)],_0x31d355=_0x167ea5['getChannelData'](0x0),_0x54c729=_0x167ea5[_0x4afcfa(0x10a)](0x1);if(!isRunning||fastForwardMode||muteMode){for(var _0x496f32=0x0;_0x496f32<AUDIO_BLOCK_SIZE;_0x496f32++){_0x31d355[_0x496f32]=0x0,_0x54c729[_0x496f32]=0x0;}return;}while(audioFifoCnt<AUDIO_BLOCK_SIZE){emuLoop();}var _0x2e9ae6=AUDIO_BLOCK_SIZE;audioFifoCnt<_0x2e9ae6&&(_0x2e9ae6=audioFifoCnt);for(var _0x496f32=0x0;_0x496f32<_0x2e9ae6;_0x496f32++){_0x31d355[_0x496f32]=audioFifo0[audioFifoHead]/0x8000,_0x54c729[_0x496f32]=audioFifo1[audioFifoHead]/0x8000,audioFifoHead=(audioFifoHead+0x1)%AUDIO_FIFO_MAXLEN,audioFifoCnt--;}}function tryInitSound(){const _0x2e381f=a0_0x18755a;if(audioContext){audioContext['state']!='running'&&audioContext[_0x2e381f(0xd7)]();return;}try{audioContext=new(window['AudioContext']||window[(_0x2e381f(0x100))])({'latencyHint':0.0001,'sampleRate':0xbb80}),scriptProcessor=audioContext['createScriptProcessor'](AUDIO_BLOCK_SIZE,0x0,0x2),scriptProcessor['onaudioprocess']=processAudio,scriptProcessor[_0x2e381f(0xc5)](audioContext['destination']),audioContext[_0x2e381f(0xd7)]();}catch(_0x131d43){console['log'](_0x131d43);}}function writeAudio(_0x29cbdc,_0x34d9cb){const _0x10b4c3=a0_0x18755a;if(fastForwardMode)return;!wasmAudioBuf&&(wasmAudioBuf=new Int16Array(Module['HEAPU8']['buffer'])[_0x10b4c3(0xde)](_0x29cbdc/0x2,_0x29cbdc/0x2+0x800));var _0x153848=(audioFifoHead+audioFifoCnt)%AUDIO_FIFO_MAXLEN;if(audioFifoCnt+_0x34d9cb>=AUDIO_FIFO_MAXLEN)return;for(var _0xf0b9b1=0x0;_0xf0b9b1<_0x34d9cb;_0xf0b9b1++){audioFifo0[_0x153848]=wasmAudioBuf[_0xf0b9b1*0x2],audioFifo1[_0x153848]=wasmAudioBuf[_0xf0b9b1*0x2+0x1],_0x153848=(_0x153848+0x1)%AUDIO_FIFO_MAXLEN;}audioFifoCnt+=_0x34d9cb;}function wasmReady(){const _0x1de4b7=a0_0x18755a;romBuffer=Module['_emuGetSymbol'](0x1);var _0x5440b9=Module['_emuGetSymbol'](0x2);wasmSaveBuf=Module['HEAPU8'][_0x1de4b7(0xde)](_0x5440b9,_0x5440b9+wasmSaveBufLen),_0x5440b9=Module[_0x1de4b7(0xe1)](0x3),imgFrameBuffer=new Uint8ClampedArray(Module[_0x1de4b7(0xf4)][_0x1de4b7(0xf7)])[_0x1de4b7(0xde)](_0x5440b9,_0x5440b9+0xf0*0xa0*0x4),idata=new ImageData(imgFrameBuffer,0xf0,0xa0);}function capture(){const _0x27ca9d=a0_0x18755a,_0x5b1464=canvas['toDataURL'](_0x27ca9d(0x102)),_0x38af69=document[_0x27ca9d(0xc6)](_0x27ca9d(0xea));return _0x38af69[_0x27ca9d(0x103)]=_0x5b1464,document['body'][_0x27ca9d(0xdd)](_0x38af69),_0x5b1464;}function emuLoop(){const _0x4b7366=a0_0x18755a;isRunning&&(frameCnt++,frameCnt%0x78==0x0&&checkSave(),Module[_0x4b7366(0xe3)](vkState),drawContext=canvas['getContext']('2d'),drawContext[_0x4b7366(0xcc)](idata,0x0,0x0));}function loop(){const _0x1cef38=a0_0x18755a;emuLoop(),window[_0x1cef38(0xfd)](loop);}function writeToIndexedDB(_0x1a5ee1,_0x1e131e){const _0x2d1b59=a0_0x18755a,_0x5d5425=indexedDB[_0x2d1b59(0xbd)](_0x2d1b59(0xd6));_0x5d5425[_0x2d1b59(0xd4)]=_0xa93c84=>{const _0x1d50ed=_0x2d1b59,_0x592ebc=_0xa93c84[_0x1d50ed(0xc2)][_0x1d50ed(0xc8)],_0x336d4e=_0x592ebc[_0x1d50ed(0xe0)]('FILE_DATA','readwrite'),_0x3a6df8=_0x336d4e['objectStore']('FILE_DATA');_0x3a6df8[_0x1d50ed(0xff)](_0x1e131e,_0x1a5ee1);};}function readFromIndexedDB(_0x3fa71f){return new Promise(_0x235b5b=>{const _0x37ce85=a0_0x5692,_0x1440b1=indexedDB[_0x37ce85(0xbd)]('/data');_0x1440b1[_0x37ce85(0xd4)]=_0x497633=>{const _0x446083=_0x37ce85,_0x582e57=_0x497633['target'][_0x446083(0xc8)],_0x3aca19=_0x582e57['transaction'](_0x446083(0xeb),_0x446083(0xd9)),_0x42fc32=_0x3aca19[_0x446083(0xd5)](_0x446083(0xeb)),_0x1b5a6f=_0x42fc32[_0x446083(0xf5)](_0x3fa71f);_0x1b5a6f[_0x446083(0xd4)]=_0x20a26f=>_0x235b5b(_0x20a26f['target']['result']);};});}function a0_0x2fda(){const _0x77eaff=['/data','resume','5AYGpuD','readonly','classList','bound','touched','appendChild','subarray','Down-left','transaction','_emuGetSymbol','_emuLoadROM','_emuRunFrame','fromCharCode','has','getElementById','remove','7617rEhfIc','_free','img','FILE_DATA','saveStateButton','2900592miDYZD','length','contains','split','Start','log','[id]','HEAPU8','get','_emuUpdateSavChangeFlag','buffer','romFile','delete','includes','_emuResetCpu','185679uOoAaP','requestAnimationFrame','_emuLoadState','put','webkitAudioContext','touchcancel','image/png','src','2118378PtfcfP','clientY','/data/states/game.sav','identifier','Select','createObjectStore','getChannelData','/data/states/','Left','toLowerCase','elementFromPoint','/data/states/game.ss1','2407839SSnJiN','Auto\x20saving...','set','touchend','addEventListener','_malloc','Up-left','closest','Down-right','loadStateButton','clientX','continue','open','onupgradeneeded','1127300iZzUEB','click','Right','target','outputBuffer','lastIndexOf','connect','createElement','DOMContentLoaded','result','10407312YxCiHz','onload','gameID','putImageData','openCursor','354ZPDoPH','touchstart','Down','add','changedTouches','readAsArrayBuffer','onsuccess','objectStore'];a0_0x2fda=function(){return _0x77eaff;};return a0_0x2fda();}function loadGameFromInput(){const _0x5b0523=a0_0x18755a;tryInitSound();var _0x274fdf=fileInput['files'][0x0];romFileName=_0x274fdf['name'];var _0x433089=new FileReader();_0x433089[_0x5b0523(0xca)]=function(_0x24c919){const _0x4c267d=_0x5b0523;var _0x37b850=_0x24c919['target']['result'],_0x414fbe=new Uint8Array(_0x37b850);gameID='';for(var _0x34f36a=0xac;_0x34f36a<0xb2;_0x34f36a++){gameID+=String[_0x4c267d(0xe4)](_0x414fbe[_0x34f36a]);}console[_0x4c267d(0xf2)](_0x4c267d(0xcb),gameID),Module[_0x4c267d(0xf4)]['set'](_0x414fbe,romBuffer),Module[_0x4c267d(0xe2)](_0x414fbe[_0x4c267d(0xee)]),loadSave(),Module['_emuResetCpu']();},_0x433089[_0x5b0523(0xd3)](_0x274fdf);}async function loadSave(){const _0x1eea9a=a0_0x18755a,_0x9e9d8e=await readFromIndexedDB(_0x1eea9a(0x106));_0x9e9d8e&&wasmSaveBuf[_0x1eea9a(0x112)](_0x9e9d8e),Module[_0x1eea9a(0xfb)](),lastCheckedSaveState=0x0,Module['_emuUpdateSavChangeFlag'](),setTimeout(()=>{isRunning=!![];},0x1f4),console[_0x1eea9a(0xf2)]('load\x20done');}function checkSave(){const _0x33ff2c=a0_0x18755a;if(!isRunning)return;const _0x19763d=Module[_0x33ff2c(0xf6)]();lastCheckedSaveState===0x1&&_0x19763d===0x0&&(tmpSaveBuf[_0x33ff2c(0x112)](wasmSaveBuf),writeToIndexedDB(_0x33ff2c(0x106),tmpSaveBuf)),lastCheckedSaveState=_0x19763d,console[_0x33ff2c(0xf2)](_0x33ff2c(0x111));}const keyMask={'a':0x1,'b':0x2,'select':0x4,'start':0x8,'right':0x10,'left':0x20,'up':0x40,'down':0x80,'r':0x100,'l':0x200};function a0_0x5692(_0x2a1c0a,_0x46c3cb){const _0x2fda91=a0_0x2fda();return a0_0x5692=function(_0x56923e,_0x4a7f84){_0x56923e=_0x56923e-0xb5;let _0x3d0f91=_0x2fda91[_0x56923e];return _0x3d0f91;},a0_0x5692(_0x2a1c0a,_0x46c3cb);}function buttonPresss(_0x11ce6a){keyMask[_0x11ce6a]&&(vkState|=keyMask[_0x11ce6a],tryInitSound());}function buttonUnpresss(_0x4dea7f){keyMask[_0x4dea7f]&&(vkState&=~keyMask[_0x4dea7f]);}function buttonPress(_0x5e075d,_0x1aed80){const _0x1fe3ee=a0_0x18755a;if(_0x5e075d[_0x1fe3ee(0xfa)]('-')){const [_0x21475b,_0x2441e1]=_0x5e075d[_0x1fe3ee(0x10d)]()[_0x1fe3ee(0xf0)]('-');_0x1aed80?buttonPresss(_0x21475b):buttonUnpresss(_0x21475b),_0x1aed80?buttonPresss(_0x2441e1):buttonUnpresss(_0x2441e1);}else _0x1aed80?buttonPresss(_0x5e075d[_0x1fe3ee(0x10d)]()):buttonUnpresss(_0x5e075d[_0x1fe3ee(0x10d)]());}document[a0_0x18755a(0xb5)](a0_0x18755a(0xc7),function(){const _0x4f5169=a0_0x18755a;loop();const _0x4fb4ac=['Up',_0x4f5169(0xd0),_0x4f5169(0x10c),_0x4f5169(0xc1),_0x4f5169(0xb7),'Up-right',_0x4f5169(0xdf),_0x4f5169(0xb9)],_0x10f158=['A','B',_0x4f5169(0xf1),_0x4f5169(0x108),'L','R'];let _0x3cc0a9=new Map(),_0x31a243=new Map();function _0x40c097(_0x1b5b4b,_0x444dac){const _0x4697dd=_0x4f5169;if(!_0x1b5b4b)return;buttonPress(_0x1b5b4b,_0x444dac);const _0x58db0c=document[_0x4697dd(0xe6)](_0x1b5b4b);_0x58db0c&&(_0x444dac?_0x58db0c[_0x4697dd(0xda)][_0x4697dd(0xd1)](_0x4697dd(0xdc)):_0x58db0c[_0x4697dd(0xda)][_0x4697dd(0xe7)](_0x4697dd(0xdc)));}function _0x5657a6(_0x3e11be){const _0x56ec49=_0x4f5169,_0x5c098d=document[_0x56ec49(0x10e)](_0x3e11be[_0x56ec49(0xbb)],_0x3e11be[_0x56ec49(0x105)]),_0x2112b0=_0x5c098d?.[_0x56ec49(0xb8)](_0x56ec49(0xf3));return _0x2112b0?_0x2112b0['id']:null;}document['addEventListener'](_0x4f5169(0xcf),_0x553395=>{const _0x1d938b=_0x4f5169;for(let _0x28c4cd of _0x553395['changedTouches']){const _0x319404=_0x5657a6(_0x28c4cd);if(!_0x319404)continue;if(_0x4fb4ac[_0x1d938b(0xfa)](_0x319404))_0x3cc0a9[_0x1d938b(0xe5)](_0x28c4cd[_0x1d938b(0x107)])&&_0x40c097(_0x3cc0a9[_0x1d938b(0xf5)](_0x28c4cd[_0x1d938b(0x107)]),![]),_0x3cc0a9[_0x1d938b(0x112)](_0x28c4cd[_0x1d938b(0x107)],_0x319404),_0x40c097(_0x319404,!![]);else _0x10f158[_0x1d938b(0xfa)](_0x319404)&&(_0x31a243[_0x1d938b(0xe5)](_0x28c4cd[_0x1d938b(0x107)])&&_0x40c097(_0x31a243[_0x1d938b(0xf5)](_0x28c4cd[_0x1d938b(0x107)]),![]),_0x31a243[_0x1d938b(0x112)](_0x28c4cd[_0x1d938b(0x107)],_0x319404),_0x40c097(_0x319404,!![]));}}),document[_0x4f5169(0xb5)]('touchmove',_0x31b32b=>{const _0x18a09c=_0x4f5169;for(let _0x4392d6 of _0x31b32b[_0x18a09c(0xd2)]){const _0x5bceff=_0x5657a6(_0x4392d6);if(!_0x5bceff)continue;if(_0x4fb4ac[_0x18a09c(0xfa)](_0x5bceff))_0x3cc0a9[_0x18a09c(0xe5)](_0x4392d6[_0x18a09c(0x107)])&&_0x3cc0a9['get'](_0x4392d6[_0x18a09c(0x107)])!==_0x5bceff&&(_0x40c097(_0x3cc0a9[_0x18a09c(0xf5)](_0x4392d6['identifier']),![]),_0x3cc0a9[_0x18a09c(0x112)](_0x4392d6[_0x18a09c(0x107)],_0x5bceff),_0x40c097(_0x5bceff,!![]));else _0x10f158[_0x18a09c(0xfa)](_0x5bceff)&&(_0x31a243[_0x18a09c(0xe5)](_0x4392d6[_0x18a09c(0x107)])&&_0x31a243['get'](_0x4392d6['identifier'])!==_0x5bceff&&(_0x40c097(_0x31a243['get'](_0x4392d6[_0x18a09c(0x107)]),![]),_0x31a243['set'](_0x4392d6[_0x18a09c(0x107)],_0x5bceff),_0x40c097(_0x5bceff,!![])));}}),document[_0x4f5169(0xb5)](_0x4f5169(0x113),_0x260c57=>{const _0x348dc7=_0x4f5169;for(let _0x446df8 of _0x260c57[_0x348dc7(0xd2)]){_0x3cc0a9[_0x348dc7(0xe5)](_0x446df8[_0x348dc7(0x107)])&&(_0x40c097(_0x3cc0a9[_0x348dc7(0xf5)](_0x446df8[_0x348dc7(0x107)]),![]),_0x3cc0a9[_0x348dc7(0xf9)](_0x446df8[_0x348dc7(0x107)])),_0x31a243[_0x348dc7(0xe5)](_0x446df8[_0x348dc7(0x107)])&&(_0x40c097(_0x31a243[_0x348dc7(0xf5)](_0x446df8[_0x348dc7(0x107)]),![]),_0x31a243[_0x348dc7(0xf9)](_0x446df8[_0x348dc7(0x107)]));}}),document[_0x4f5169(0xb5)](_0x4f5169(0x101),_0x2223cb=>{const _0x3d04bc=_0x4f5169;for(let _0x46f5ed of _0x2223cb['changedTouches']){_0x3cc0a9[_0x3d04bc(0xe5)](_0x46f5ed[_0x3d04bc(0x107)])&&(_0x40c097(_0x3cc0a9['get'](_0x46f5ed[_0x3d04bc(0x107)]),![]),_0x3cc0a9[_0x3d04bc(0xf9)](_0x46f5ed[_0x3d04bc(0x107)])),_0x31a243[_0x3d04bc(0xe5)](_0x46f5ed[_0x3d04bc(0x107)])&&(_0x40c097(_0x31a243[_0x3d04bc(0xf5)](_0x46f5ed[_0x3d04bc(0x107)]),![]),_0x31a243['delete'](_0x46f5ed[_0x3d04bc(0x107)]));}});}),saveButton[a0_0x18755a(0xb5)](a0_0x18755a(0xc0),function(){const _0x95d8a8=a0_0x18755a,_0x5e3862=Module[_0x95d8a8(0xb6)](0x1e8480),_0x54c41f=Module['_emuSaveState'](_0x5e3862,0x1e8480),_0x2d060c=new Uint8Array(Module['HEAPU8'][_0x95d8a8(0xf7)],_0x5e3862,_0x54c41f)['slice']();Module[_0x95d8a8(0xe9)](_0x5e3862),writeToIndexedDB(_0x95d8a8(0x10f),_0x2d060c);}),loadButton['addEventListener'](a0_0x18755a(0xc0),async function(){const _0x22386d=a0_0x18755a,_0x2d6a8c=await readFromIndexedDB(_0x22386d(0x10f)),_0x459705=_0x2d6a8c['length'],_0x3c8c83=Module['_malloc'](_0x459705);Module[_0x22386d(0xf4)][_0x22386d(0x112)](_0x2d6a8c,_0x3c8c83),Module[_0x22386d(0xfe)](_0x3c8c83,_0x459705),Module[_0x22386d(0xe9)](_0x3c8c83);});function loadfile(_0x2fa8f4){const _0x2d7045=a0_0x18755a,_0x70371d=indexedDB[_0x2d7045(0xbd)](_0x2d7045(0xd6));_0x70371d[_0x2d7045(0xbe)]=_0x326505=>{const _0x287fea=_0x2d7045,_0x44b43a=_0x326505['target']['result'];!_0x44b43a['objectStoreNames'][_0x287fea(0xef)](_0x287fea(0xeb))&&_0x44b43a[_0x287fea(0x109)](_0x287fea(0xeb));},indexedDB[_0x2d7045(0xbd)](_0x2d7045(0xd6))['onsuccess']=_0x2f88bd=>{const _0x50a53b=_0x2d7045,_0x5c23d7=_0x2f88bd['target'][_0x50a53b(0xc8)],_0x1b9534=IDBKeyRange[_0x50a53b(0xdb)](_0x2fa8f4,_0x2fa8f4+'ï¿¿');_0x5c23d7[_0x50a53b(0xe0)](_0x50a53b(0xeb),'readonly')['objectStore']('FILE_DATA')[_0x50a53b(0xcd)](_0x1b9534)[_0x50a53b(0xd4)]=_0x33d869=>{const _0x2d5320=_0x50a53b,_0x35048c=_0x33d869[_0x2d5320(0xc2)][_0x2d5320(0xc8)];if(_0x35048c){const _0x382fec=_0x35048c['key'];console['log'](_0x382fec['substring'](_0x382fec[_0x2d5320(0xc4)]('/')+0x1)),_0x35048c[_0x2d5320(0xbc)]();}};};}loadfile(a0_0x18755a(0x10b));