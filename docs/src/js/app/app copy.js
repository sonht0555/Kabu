const a0_0xde2815=a0_0x16a5;(function(_0x593eaf,_0x3d5d57){const _0x4578c5=a0_0x16a5,_0x293174=_0x593eaf();while(!![]){try{const _0x21c6b8=-parseInt(_0x4578c5(0x197))/0x1*(-parseInt(_0x4578c5(0x1aa))/0x2)+parseInt(_0x4578c5(0x1df))/0x3+-parseInt(_0x4578c5(0x1a9))/0x4+parseInt(_0x4578c5(0x1cb))/0x5+-parseInt(_0x4578c5(0x1f4))/0x6+-parseInt(_0x4578c5(0x19e))/0x7+parseInt(_0x4578c5(0x1b9))/0x8*(parseInt(_0x4578c5(0x1cf))/0x9);if(_0x21c6b8===_0x3d5d57)break;else _0x293174['push'](_0x293174['shift']());}catch(_0x5e253a){_0x293174['push'](_0x293174['shift']());}}}(a0_0x56e2,0x40fbb));var wasmAudioBuf,wasmSaveBuf,gameID,romFileName,drawContext,idata,imgFrameBuffer,scriptProcessor,audioContext;const AUDIO_BLOCK_SIZE=0x400,AUDIO_FIFO_MAXLEN=0x1324;var audioFifo0=new Int16Array(AUDIO_FIFO_MAXLEN),audioFifo1=new Int16Array(AUDIO_FIFO_MAXLEN),romBuffer=-0x1,isRunning=![];const wasmSaveBufLen=0x20000+0x2000;var tmpSaveBuf=new Uint8Array(wasmSaveBufLen),audioFifoHead=0x0,audioFifoCnt=0x0,lastCheckedSaveState=0x0,muteMode=![],fastForwardMode=![];function a0_0x16a5(_0x4a9c75,_0x464bcd){const _0x56e223=a0_0x56e2();return a0_0x16a5=function(_0x16a5b4,_0x46bcc0){_0x16a5b4=_0x16a5b4-0x193;let _0x24bd18=_0x56e223[_0x16a5b4];return _0x24bd18;},a0_0x16a5(_0x4a9c75,_0x464bcd);}let vkState=0x0;function a0_0x56e2(){const _0x311255=['_malloc','length','log','put','createScriptProcessor','running','addEventListener','24UKQLCc','Right','/data','key','open','romFile','loadStateButton','[id]','add','get','/data/states/game.sav','target','resume','onload','toLowerCase','changedTouches','classList','_free','1389350WzJpKG','body','HEAPU8','/data/states/game.ss1','1428111MpQKRh','has','elementFromPoint','_emuLoadState','remove','identifier','outputBuffer','delete','openCursor','bound','closest','touchend','readonly','webkitAudioContext','transaction','_emuSaveState','763506PymVzp','touchmove','readwrite','touched','DOMContentLoaded','readAsArrayBuffer','Auto\x20saving...','_emuGetSymbol','_emuUpdateSavChangeFlag','FILE_DATA','files','result','Select','Down','requestAnimationFrame','set','touchcancel','getChannelData','split','onaudioprocess','toDataURL','2370774WFizYb','img','Up-right','name','objectStore','Left','clientX','37btsxtt','createObjectStore','substring','AudioContext','src','touchstart','canvas','826203pTLMuh','_emuRunFrame','clientY','connect','state','subarray','includes','_emuLoadROM','_emuResetCpu','buffer','createElement','1583652xqFOeZ','9018UYfxcF','load\x20done','getContext','image/png','Down-left','destination','onsuccess','getElementById'];a0_0x56e2=function(){return _0x311255;};return a0_0x56e2();}var frameCnt=0x0;const fileInput=document['getElementById'](a0_0xde2815(0x1be)),canvas=document[a0_0xde2815(0x1b1)](a0_0xde2815(0x19d)),saveButton=document[a0_0xde2815(0x1b1)]('saveStateButton'),loadButton=document[a0_0xde2815(0x1b1)](a0_0xde2815(0x1bf));function processAudio(_0x554ee8){const _0x1e802a=a0_0xde2815;var _0x19d3e8=_0x554ee8[_0x1e802a(0x1d5)],_0x3e7a83=_0x19d3e8[_0x1e802a(0x1f0)](0x0),_0x303733=_0x19d3e8['getChannelData'](0x1);if(!isRunning||fastForwardMode||muteMode){for(var _0x2c04c3=0x0;_0x2c04c3<AUDIO_BLOCK_SIZE;_0x2c04c3++){_0x3e7a83[_0x2c04c3]=0x0,_0x303733[_0x2c04c3]=0x0;}return;}while(audioFifoCnt<AUDIO_BLOCK_SIZE){emuLoop();}var _0x4eb171=AUDIO_BLOCK_SIZE;audioFifoCnt<_0x4eb171&&(_0x4eb171=audioFifoCnt);for(var _0x2c04c3=0x0;_0x2c04c3<_0x4eb171;_0x2c04c3++){_0x3e7a83[_0x2c04c3]=audioFifo0[audioFifoHead]/0x8000,_0x303733[_0x2c04c3]=audioFifo1[audioFifoHead]/0x8000,audioFifoHead=(audioFifoHead+0x1)%AUDIO_FIFO_MAXLEN,audioFifoCnt--;}}function tryInitSound(){const _0x680958=a0_0xde2815;if(audioContext){audioContext[_0x680958(0x1a2)]!=_0x680958(0x1b7)&&audioContext[_0x680958(0x1c5)]();return;}try{audioContext=new(window[(_0x680958(0x19a))]||window[(_0x680958(0x1dc))])({'latencyHint':0.0001,'sampleRate':0xbb80}),scriptProcessor=audioContext[_0x680958(0x1b6)](AUDIO_BLOCK_SIZE,0x0,0x2),scriptProcessor[_0x680958(0x1f2)]=processAudio,scriptProcessor[_0x680958(0x1a1)](audioContext[_0x680958(0x1af)]),audioContext[_0x680958(0x1c5)]();}catch(_0x445a76){console[_0x680958(0x1b4)](_0x445a76);}}function writeAudio(_0x265ef4,_0xb66b84){if(fastForwardMode)return;!wasmAudioBuf&&(wasmAudioBuf=new Int16Array(Module['HEAPU8']['buffer'])['subarray'](_0x265ef4/0x2,_0x265ef4/0x2+0x800));var _0x2a9100=(audioFifoHead+audioFifoCnt)%AUDIO_FIFO_MAXLEN;if(audioFifoCnt+_0xb66b84>=AUDIO_FIFO_MAXLEN)return;for(var _0x38b575=0x0;_0x38b575<_0xb66b84;_0x38b575++){audioFifo0[_0x2a9100]=wasmAudioBuf[_0x38b575*0x2],audioFifo1[_0x2a9100]=wasmAudioBuf[_0x38b575*0x2+0x1],_0x2a9100=(_0x2a9100+0x1)%AUDIO_FIFO_MAXLEN;}audioFifoCnt+=_0xb66b84;}function wasmReady(){const _0x40b9bd=a0_0xde2815;romBuffer=Module[_0x40b9bd(0x1e6)](0x1);var _0x2552ff=Module[_0x40b9bd(0x1e6)](0x2);wasmSaveBuf=Module[_0x40b9bd(0x1cd)][_0x40b9bd(0x1a3)](_0x2552ff,_0x2552ff+wasmSaveBufLen),_0x2552ff=Module[_0x40b9bd(0x1e6)](0x3),imgFrameBuffer=new Uint8ClampedArray(Module[_0x40b9bd(0x1cd)][_0x40b9bd(0x1a7)])['subarray'](_0x2552ff,_0x2552ff+0xf0*0xa0*0x4),idata=new ImageData(imgFrameBuffer,0xf0,0xa0);}function capture(){const _0x457f81=a0_0xde2815,_0x539201=canvas[_0x457f81(0x1f3)](_0x457f81(0x1ad)),_0x54f281=document[_0x457f81(0x1a8)](_0x457f81(0x1f5));return _0x54f281[_0x457f81(0x19b)]=_0x539201,document[_0x457f81(0x1cc)]['appendChild'](_0x54f281),_0x539201;}function emuLoop(){const _0xb1a3e4=a0_0xde2815;isRunning&&(frameCnt++,frameCnt%0x78==0x0&&checkSave(),Module[_0xb1a3e4(0x19f)](vkState),drawContext=canvas[_0xb1a3e4(0x1ac)]('2d'),drawContext['putImageData'](idata,0x0,0x0));}function loop(){const _0x2729bc=a0_0xde2815;emuLoop(),window[_0x2729bc(0x1ed)](loop);}function writeToIndexedDB(_0x33e903,_0x288d7e){const _0x5370c6=a0_0xde2815,_0xc01fc6=indexedDB['open'](_0x5370c6(0x1bb));_0xc01fc6[_0x5370c6(0x1b0)]=_0x499622=>{const _0x3a2ee8=_0x5370c6,_0x499d53=_0x499622[_0x3a2ee8(0x1c4)][_0x3a2ee8(0x1ea)],_0x5d3568=_0x499d53[_0x3a2ee8(0x1dd)](_0x3a2ee8(0x1e8),_0x3a2ee8(0x1e1)),_0x17de2e=_0x5d3568[_0x3a2ee8(0x194)]('FILE_DATA');_0x17de2e[_0x3a2ee8(0x1b5)](_0x288d7e,_0x33e903);};}function readFromIndexedDB(_0x3f6c37){return new Promise(_0x2ba552=>{const _0x524ade=a0_0x16a5,_0x366d64=indexedDB[_0x524ade(0x1bd)](_0x524ade(0x1bb));_0x366d64[_0x524ade(0x1b0)]=_0xe2f0=>{const _0x44fec6=_0x524ade,_0x53407f=_0xe2f0[_0x44fec6(0x1c4)]['result'],_0x422db8=_0x53407f[_0x44fec6(0x1dd)](_0x44fec6(0x1e8),_0x44fec6(0x1db)),_0x3673f0=_0x422db8[_0x44fec6(0x194)](_0x44fec6(0x1e8)),_0xab0ea0=_0x3673f0[_0x44fec6(0x1c2)](_0x3f6c37);_0xab0ea0[_0x44fec6(0x1b0)]=_0x14d2c7=>_0x2ba552(_0x14d2c7[_0x44fec6(0x1c4)]['result']);};});}function loadGameFromInput(){const _0x4dfbd7=a0_0xde2815;tryInitSound();var _0x424686=fileInput[_0x4dfbd7(0x1e9)][0x0];romFileName=_0x424686[_0x4dfbd7(0x193)];var _0x203f26=new FileReader();_0x203f26[_0x4dfbd7(0x1c6)]=function(_0x229065){const _0x107041=_0x4dfbd7;var _0x4789c6=_0x229065[_0x107041(0x1c4)][_0x107041(0x1ea)],_0x39b4c0=new Uint8Array(_0x4789c6);gameID='';for(var _0x2bd5f0=0xac;_0x2bd5f0<0xb2;_0x2bd5f0++){gameID+=String['fromCharCode'](_0x39b4c0[_0x2bd5f0]);}console[_0x107041(0x1b4)]('gameID',gameID),Module[_0x107041(0x1cd)][_0x107041(0x1ee)](_0x39b4c0,romBuffer),Module[_0x107041(0x1a5)](_0x39b4c0[_0x107041(0x1b3)]),loadSave(),Module[_0x107041(0x1a6)]();},_0x203f26[_0x4dfbd7(0x1e4)](_0x424686);}async function loadSave(){const _0x45b3b2=a0_0xde2815,_0x369097=await readFromIndexedDB(_0x45b3b2(0x1c3));_0x369097&&wasmSaveBuf[_0x45b3b2(0x1ee)](_0x369097),Module['_emuResetCpu'](),lastCheckedSaveState=0x0,Module['_emuUpdateSavChangeFlag'](),setTimeout(()=>{isRunning=!![];},0x1f4),console[_0x45b3b2(0x1b4)](_0x45b3b2(0x1ab));}function checkSave(){const _0x3f7511=a0_0xde2815;if(!isRunning)return;const _0x10b796=Module[_0x3f7511(0x1e7)]();lastCheckedSaveState===0x1&&_0x10b796===0x0&&(tmpSaveBuf[_0x3f7511(0x1ee)](wasmSaveBuf),writeToIndexedDB(_0x3f7511(0x1c3),tmpSaveBuf)),lastCheckedSaveState=_0x10b796,console[_0x3f7511(0x1b4)](_0x3f7511(0x1e5));}const keyMask={'a':0x1,'b':0x2,'select':0x4,'start':0x8,'right':0x10,'left':0x20,'up':0x40,'down':0x80,'r':0x100,'l':0x200};function buttonPresss(_0x4a8979){keyMask[_0x4a8979]&&(vkState|=keyMask[_0x4a8979],tryInitSound());}function buttonUnpresss(_0x306393){keyMask[_0x306393]&&(vkState&=~keyMask[_0x306393]);}function buttonPress(_0xfcf34f,_0x19351f){const _0x3764dc=a0_0xde2815;if(_0xfcf34f[_0x3764dc(0x1a4)]('-')){const [_0x7c4adf,_0x1b11c4]=_0xfcf34f['toLowerCase']()[_0x3764dc(0x1f1)]('-');_0x19351f?buttonPresss(_0x7c4adf):buttonUnpresss(_0x7c4adf),_0x19351f?buttonPresss(_0x1b11c4):buttonUnpresss(_0x1b11c4);}else _0x19351f?buttonPresss(_0xfcf34f['toLowerCase']()):buttonUnpresss(_0xfcf34f[_0x3764dc(0x1c7)]());}document[a0_0xde2815(0x1b8)](a0_0xde2815(0x1e3),function(){const _0x95ae3f=a0_0xde2815;loop();const _0xcd1ba=['Up',_0x95ae3f(0x1ec),_0x95ae3f(0x195),_0x95ae3f(0x1ba),'Up-left',_0x95ae3f(0x1f6),_0x95ae3f(0x1ae),'Down-right'],_0x2feacd=['A','B','Start',_0x95ae3f(0x1eb),'L','R'];let _0x4d9a40=new Map(),_0x529f8d=new Map();function _0x6f1fc(_0x3afd0b,_0x4f42e3){const _0x177b29=_0x95ae3f;if(!_0x3afd0b)return;buttonPress(_0x3afd0b,_0x4f42e3);const _0x24cf53=document[_0x177b29(0x1b1)](_0x3afd0b);_0x24cf53&&(_0x4f42e3?_0x24cf53[_0x177b29(0x1c9)][_0x177b29(0x1c1)]('touched'):_0x24cf53[_0x177b29(0x1c9)][_0x177b29(0x1d3)](_0x177b29(0x1e2)));}function _0x4eb96d(_0x14b2e9){const _0x94f6fb=_0x95ae3f,_0x4d700c=document[_0x94f6fb(0x1d1)](_0x14b2e9[_0x94f6fb(0x196)],_0x14b2e9[_0x94f6fb(0x1a0)]),_0x153c74=_0x4d700c?.[_0x94f6fb(0x1d9)](_0x94f6fb(0x1c0));return _0x153c74?_0x153c74['id']:null;}document['addEventListener'](_0x95ae3f(0x19c),_0xe32f3f=>{const _0x4a77db=_0x95ae3f;for(let _0x594009 of _0xe32f3f[_0x4a77db(0x1c8)]){const _0x366e2d=_0x4eb96d(_0x594009);if(!_0x366e2d)continue;if(_0xcd1ba[_0x4a77db(0x1a4)](_0x366e2d))_0x4d9a40[_0x4a77db(0x1d0)](_0x594009[_0x4a77db(0x1d4)])&&_0x6f1fc(_0x4d9a40[_0x4a77db(0x1c2)](_0x594009[_0x4a77db(0x1d4)]),![]),_0x4d9a40['set'](_0x594009['identifier'],_0x366e2d),_0x6f1fc(_0x366e2d,!![]);else _0x2feacd[_0x4a77db(0x1a4)](_0x366e2d)&&(_0x529f8d[_0x4a77db(0x1d0)](_0x594009['identifier'])&&_0x6f1fc(_0x529f8d['get'](_0x594009[_0x4a77db(0x1d4)]),![]),_0x529f8d[_0x4a77db(0x1ee)](_0x594009[_0x4a77db(0x1d4)],_0x366e2d),_0x6f1fc(_0x366e2d,!![]));}}),document[_0x95ae3f(0x1b8)](_0x95ae3f(0x1e0),_0x49087f=>{const _0x226b67=_0x95ae3f;for(let _0x167650 of _0x49087f[_0x226b67(0x1c8)]){const _0x1eb3e5=_0x4eb96d(_0x167650);if(!_0x1eb3e5)continue;if(_0xcd1ba[_0x226b67(0x1a4)](_0x1eb3e5))_0x4d9a40[_0x226b67(0x1d0)](_0x167650['identifier'])&&_0x4d9a40[_0x226b67(0x1c2)](_0x167650[_0x226b67(0x1d4)])!==_0x1eb3e5&&(_0x6f1fc(_0x4d9a40[_0x226b67(0x1c2)](_0x167650[_0x226b67(0x1d4)]),![]),_0x4d9a40['set'](_0x167650[_0x226b67(0x1d4)],_0x1eb3e5),_0x6f1fc(_0x1eb3e5,!![]));else _0x2feacd[_0x226b67(0x1a4)](_0x1eb3e5)&&(_0x529f8d[_0x226b67(0x1d0)](_0x167650[_0x226b67(0x1d4)])&&_0x529f8d[_0x226b67(0x1c2)](_0x167650[_0x226b67(0x1d4)])!==_0x1eb3e5&&(_0x6f1fc(_0x529f8d[_0x226b67(0x1c2)](_0x167650['identifier']),![]),_0x529f8d[_0x226b67(0x1ee)](_0x167650['identifier'],_0x1eb3e5),_0x6f1fc(_0x1eb3e5,!![])));}}),document[_0x95ae3f(0x1b8)](_0x95ae3f(0x1da),_0x3a9e96=>{const _0x3c25a2=_0x95ae3f;for(let _0x48fbf0 of _0x3a9e96['changedTouches']){_0x4d9a40[_0x3c25a2(0x1d0)](_0x48fbf0[_0x3c25a2(0x1d4)])&&(_0x6f1fc(_0x4d9a40[_0x3c25a2(0x1c2)](_0x48fbf0[_0x3c25a2(0x1d4)]),![]),_0x4d9a40[_0x3c25a2(0x1d6)](_0x48fbf0[_0x3c25a2(0x1d4)])),_0x529f8d['has'](_0x48fbf0['identifier'])&&(_0x6f1fc(_0x529f8d[_0x3c25a2(0x1c2)](_0x48fbf0['identifier']),![]),_0x529f8d[_0x3c25a2(0x1d6)](_0x48fbf0['identifier']));}}),document['addEventListener'](_0x95ae3f(0x1ef),_0x177c0f=>{const _0xe305d7=_0x95ae3f;for(let _0x33d0d1 of _0x177c0f[_0xe305d7(0x1c8)]){_0x4d9a40['has'](_0x33d0d1[_0xe305d7(0x1d4)])&&(_0x6f1fc(_0x4d9a40['get'](_0x33d0d1[_0xe305d7(0x1d4)]),![]),_0x4d9a40[_0xe305d7(0x1d6)](_0x33d0d1[_0xe305d7(0x1d4)])),_0x529f8d[_0xe305d7(0x1d0)](_0x33d0d1[_0xe305d7(0x1d4)])&&(_0x6f1fc(_0x529f8d['get'](_0x33d0d1[_0xe305d7(0x1d4)]),![]),_0x529f8d[_0xe305d7(0x1d6)](_0x33d0d1[_0xe305d7(0x1d4)]));}});}),saveButton['addEventListener']('click',function(){const _0x25bb41=a0_0xde2815,_0x31e6c7=Module[_0x25bb41(0x1b2)](0x1e8480),_0x17b6e9=Module[_0x25bb41(0x1de)](_0x31e6c7,0x1e8480),_0x508f95=new Uint8Array(Module[_0x25bb41(0x1cd)][_0x25bb41(0x1a7)],_0x31e6c7,_0x17b6e9)['slice']();Module['_free'](_0x31e6c7),writeToIndexedDB('/data/states/game.ss1',_0x508f95);}),loadButton[a0_0xde2815(0x1b8)]('click',async function(){const _0x25d1ed=a0_0xde2815,_0xcbd2bc=await readFromIndexedDB(_0x25d1ed(0x1ce)),_0xa45b03=_0xcbd2bc['length'],_0x143596=Module['_malloc'](_0xa45b03);Module['HEAPU8'][_0x25d1ed(0x1ee)](_0xcbd2bc,_0x143596),Module[_0x25d1ed(0x1d2)](_0x143596,_0xa45b03),Module[_0x25d1ed(0x1ca)](_0x143596);});function loadfile(_0x41fcea){const _0x327a54=a0_0xde2815,_0xd74675=indexedDB[_0x327a54(0x1bd)]('/data');_0xd74675['onupgradeneeded']=_0x2a4418=>{const _0x491153=_0x327a54,_0x16b330=_0x2a4418[_0x491153(0x1c4)][_0x491153(0x1ea)];!_0x16b330['objectStoreNames']['contains'](_0x491153(0x1e8))&&_0x16b330[_0x491153(0x198)](_0x491153(0x1e8));},indexedDB[_0x327a54(0x1bd)](_0x327a54(0x1bb))['onsuccess']=_0x38f530=>{const _0x3c6086=_0x327a54,_0x23d404=_0x38f530['target'][_0x3c6086(0x1ea)],_0x286556=IDBKeyRange[_0x3c6086(0x1d8)](_0x41fcea,_0x41fcea+'ï¿¿');_0x23d404[_0x3c6086(0x1dd)](_0x3c6086(0x1e8),'readonly')['objectStore'](_0x3c6086(0x1e8))[_0x3c6086(0x1d7)](_0x286556)['onsuccess']=_0x2cd72a=>{const _0x2ec8c9=_0x3c6086,_0x5d7df0=_0x2cd72a['target'][_0x2ec8c9(0x1ea)];if(_0x5d7df0){const _0x250b6e=_0x5d7df0[_0x2ec8c9(0x1bc)];console[_0x2ec8c9(0x1b4)](_0x250b6e[_0x2ec8c9(0x199)](_0x250b6e['lastIndexOf']('/')+0x1)),_0x5d7df0['continue']();}};};}loadfile('/data/states/');